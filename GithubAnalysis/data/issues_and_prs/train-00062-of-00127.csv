ethereum/ethereum-org-website,1087244726,4888,"{'number': 4888.0, 'repo': 'ethereum-org-website', 'user_login': 'ethereum'}","[{'action': 'opened', 'author': 'wackerow', 'comment_id': None, 'datetime': '2021-12-22T23:01:00Z', 'masked_author': 'username_0', 'text': '***\r\n### :zap: Changes\r\n- Syntax adjustments (#4835) @username_0\r\n- Chinese Simplified: Homepage (#4863) @username_0\r\n- Updated with Edition 83 of the Ben Edgington\'s blog (#4865) @cdomashn\r\n- add skip link to main content button (#4570) @il3ven\r\n- Show total translator amount on contributors page (#4828) @corwintines\r\n- Fixing typo of ""testnests"" to ""testnet"" (#4857) @BrysonXiao\r\n- Turkish: Homepage updated (#4849) @username_0\r\n- Swedish: Homepage updated (#4848) @username_0\r\n- Polish: Homepage updated (#4846) @username_0\r\n- Norwegian: Homepage updated (#4845) @username_0\r\n- Malayalam: Homepage updated (#4844) @username_0\r\n- Korean: Homepage updated (#4843) @username_0\r\n- Italian: Homepage updated (#4842) @username_0\r\n- Igbo: Homepage updated (#4841) @username_0\r\n- Hindi: Homepage updated (#4840) @username_0\r\n- French: Homepage updated (#4839) @username_0\r\n- Finnish: Homepage updated (#4838) @username_0\r\n- Czech: Homepage updated (#4837) @username_0\r\n- Add Vitalik\'s governance articles to Further Reading (#4850) @skylarweaver\r\n- Design: Redesign `TableOfContents` (#4722) @Hakeemmidan\r\n- Update definition of wallet in developer docs for accounts (#4822) @kennethcassel\r\n- Grammatical corrections in energy-consumption doc (#4823) @bskrksyp9\r\n- Update eth price granularity (#4797) @MiConnell\r\n- Update number of translators (#4817) @lukassim\r\n- Add Keepers to the Documentation [Fixes #4477] (#4698) @andrejrakic\r\n- Fix punctuation in getting-started-with-ethereum tutorial (#4800) @bskrksyp9\r\n- Fix  Typo: Incorrect range for uint112 in Tutorials/Uniswap V2 (#4801) @Taimoor0217\r\n- doc:fix duplicate link on online community page (#4799) @0xdie\r\n- Remove HTML from json files (#4802) @minimalsm\r\n- Crowdin export formatting fixes  (#4806) @minimalsm\r\n- Remove redundant link (#4805) @kum9748ar\r\n- Add myetherwallet support on supported wallets (#4786) @gamalielhere\r\n\r\n## :globe_with_meridians: Translations\r\n\r\n- Update #after-the-merge header ids (#4886) @username_0\r\n- Removes all comments from content markdown (#4880) @username_0\r\n- Link fixes (#4884) @username_0\r\n- Chinese Simplified: Developer Tutorials (#4871) @username_0\r\n- Broken link fixes (#4882) @username_0\r\n- Website name spelling fixes (#4861) @username_0\r\n- Slovenian: Use Cases (#4856) @username_0\r\n- Japanese: Use Cases (#4855) @username_0\r\n- Fix indonesian broken images (#4881) @minimalsm\r\n- Indonesian: Use Cases (#4854) @username_0\r\n- Portuguese Brazilian: Content updated (#4847) @username_0\r\n- Chinese Simplified: Learn Pages (#4870) @username_0\r\n- Chinese Simplified: Use Cases (#4866) @username_0\r\n- Chinese Simplified: Docs - Foundational (#4867) @username_0\r\n- Malay: New language, homepage (#4747) @username_0\r\n- Chinese Simplified: Docs - Tech Stack (#4869) @username_0\r\n- Chinese Simplified: Use Ethereum (#4864) @username_0\r\n- Chinese Simplified: Docs - Advanced (#4872) @username_0\r\n- Syntax clean-up on tutorial (#4853) @username_0\r\n- Refactor `DocLink` component (#4807) @username_0\r\n- Fix broken links (#4816) @minimalsm\r\n- remove \'Offchain Labs Arbitrum SCSC\' from hybrid rollup solutions (#4832) @pcaversaccio\r\n- Fix buggy markdown link syntax (#4819) @username_0\r\n- Japanese ""Use Ethereum"" content bucket (#4809) @username_0\r\n- Ukraine ""Use Ethereum"" content bucket (#4810) @username_0\r\n- Romanian ""Use Ethereum"" content bucket (#4811) @username_0\r\n- Slovenian ""Use Ethereum"" content bucket (#4812) @username_0\r\n- Summary points refactor for `eth2` template (#4760) @username_0\r\n\r\n## :house: Internal\r\n\r\n- Malay: New language, homepage (#4747) @username_0\r\n- Swahili: New language, homepage (#4836) @username_0\r\n- Refactor `summaryPoints` for use-cases (#4803) @username_0\r\n***\r\n### :unicorn: Contributors\r\nThank you @0xdie, @BrysonXiao, @Hakeemmidan, @MiConnell, @Taimoor0217, @andrejrakic, @bskrksyp9, @cdomashn, @corwintines, @gamalielhere, @il3ven, @kennethcassel, @kum9748ar, @lukassim, @minimalsm, @pcaversaccio, @samajammin, @skylarweaver and @username_0 for the contributions! :trophy:\r\n***', 'title': 'Deploy v3.3.0', 'type': 'issue'}]","<issue_start><issue_comment>Title: Deploy v3.3.0
username_0: ***
### :zap: Changes
- Syntax adjustments (#4835) @username_0
- Chinese Simplified: Homepage (#4863) @username_0
- Updated with Edition 83 of the Ben Edgington's blog (#4865) @cdomashn
- add skip link to main content button (#4570) @il3ven
- Show total translator amount on contributors page (#4828) @corwintines
- Fixing typo of ""testnests"" to ""testnet"" (#4857) @BrysonXiao
- Turkish: Homepage updated (#4849) @username_0
- Swedish: Homepage updated (#4848) @username_0
- Polish: Homepage updated (#4846) @username_0
- Norwegian: Homepage updated (#4845) @username_0
- Malayalam: Homepage updated (#4844) @username_0
- Korean: Homepage updated (#4843) @username_0
- Italian: Homepage updated (#4842) @username_0
- Igbo: Homepage updated (#4841) @username_0
- Hindi: Homepage updated (#4840) @username_0
- French: Homepage updated (#4839) @username_0
- Finnish: Homepage updated (#4838) @username_0
- Czech: Homepage updated (#4837) @username_0
- Add Vitalik's governance articles to Further Reading (#4850) @skylarweaver
- Design: Redesign `TableOfContents` (#4722) @Hakeemmidan
- Update definition of wallet in developer docs for accounts (#4822) @kennethcassel
- Grammatical corrections in energy-consumption doc (#4823) @bskrksyp9
- Update eth price granularity (#4797) @MiConnell
- Update number of translators (#4817) @lukassim
- Add Keepers to the Documentation [Fixes #4477] (#4698) @andrejrakic
- Fix punctuation in getting-started-with-ethereum tutorial (#4800) @bskrksyp9
- Fix  Typo: Incorrect range for uint112 in Tutorials/Uniswap V2 (#4801) @Taimoor0217
- doc:fix duplicate link on online community page (#4799) @0xdie
- Remove HTML from json files (#4802) @minimalsm
- Crowdin export formatting fixes  (#4806) @minimalsm
- Remove redundant link (#4805) @kum9748ar
- Add myetherwallet support on supported wallets (#4786) @gamalielhere

## :globe_with_meridians: Translations

- Update #after-the-merge header ids (#4886) @username_0
- Removes all comments from content markdown (#4880) @username_0
- Link fixes (#4884) @username_0
- Chinese Simplified: Developer Tutorials (#4871) @username_0
- Broken link fixes (#4882) @username_0
- Website name spelling fixes (#4861) @username_0
- Slovenian: Use Cases (#4856) @username_0
- Japanese: Use Cases (#4855) @username_0
- Fix indonesian broken images (#4881) @minimalsm
- Indonesian: Use Cases (#4854) @username_0
- Portuguese Brazilian: Content updated (#4847) @username_0
- Chinese Simplified: Learn Pages (#4870) @username_0
- Chinese Simplified: Use Cases (#4866) @username_0
- Chinese Simplified: Docs - Foundational (#4867) @username_0
- Malay: New language, homepage (#4747) @username_0
- Chinese Simplified: Docs - Tech Stack (#4869) @username_0
- Chinese Simplified: Use Ethereum (#4864) @username_0
- Chinese Simplified: Docs - Advanced (#4872) @username_0
- Syntax clean-up on tutorial (#4853) @username_0
- Refactor `DocLink` component (#4807) @username_0
- Fix broken links (#4816) @minimalsm
- remove 'Offchain Labs Arbitrum SCSC' from hybrid rollup solutions (#4832) @pcaversaccio
- Fix buggy markdown link syntax (#4819) @username_0
- Japanese ""Use Ethereum"" content bucket (#4809) @username_0
- Ukraine ""Use Ethereum"" content bucket (#4810) @username_0
- Romanian ""Use Ethereum"" content bucket (#4811) @username_0
- Slovenian ""Use Ethereum"" content bucket (#4812) @username_0
- Summary points refactor for `eth2` template (#4760) @username_0

## :house: Internal

- Malay: New language, homepage (#4747) @username_0
- Swahili: New language, homepage (#4836) @username_0
- Refactor `summaryPoints` for use-cases (#4803) @username_0
***
### :unicorn: Contributors
Thank you @0xdie, @BrysonXiao, @Hakeemmidan, @MiConnell, @Taimoor0217, @andrejrakic, @bskrksyp9, @cdomashn, @corwintines, @gamalielhere, @il3ven, @kennethcassel, @kum9748ar, @lukassim, @minimalsm, @pcaversaccio, @samajammin, @skylarweaver and @username_0 for the contributions! :trophy:
***"
flutter/website,1153327963,6856,,"[{'action': 'opened', 'author': 'dnparadice', 'comment_id': None, 'datetime': '2022-02-27 17:19:04+00:00', 'masked_author': 'username_0', 'text': '### Page URL\n\nhttps://docs.flutter.dev/development/platform-integration/platform-channels/\n\n### Page source\n\nhttps://github.com/flutter/website/tree/main/src/development/platform-integration/platform-channels.md\n\n### Describe the problem\n\nCant resolve NoNull, embedding, or plugin for the imports:\r\n\r\nimport androidx.annotation.NoNull;\r\nimport io.flutter.embedding.android.FlutterActivity;\r\nimport io.flutter.embedding.engine.FlutterEngine;\r\nimport io.flutter.plugin.common.MethodChannel;\r\n\r\nFlutter doctor returns: \r\n\r\n[✓] Flutter (Channel stable, 2.10.2, on macOS 11.4 20F71 darwin-x64, locale en-US)\r\n[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.0-rc1)\r\n[!] Xcode - develop for iOS and macOS (Xcode 12.5.1)\r\n    ! Flutter recommends a minimum Xcode version of 13.\r\n      Download the latest version or update via the Mac App Store.\r\n[✓] Chrome - develop for the web\r\n[✓] Android Studio (version 4.2)\r\n[✓] Connected device (3 available)\r\n[✓] HTTP Host Availability\r\n\n\n### Expected fix\n\n1) Offer a solution to resolve dependency issues in demo project, even if that is a link to how to fix gradle or whatever is causing the dependency issue. \r\n2) Specify dependency tree for the demo project, for each of the required tools if flutter is not able to resolve these dependancies automatically. \r\n3) default flutter new project configuration is Kotlin but the example source on github is in Java so you cant see a kotlin version of the code. \n\n### Additional context\n\n_No response_', 'title': ""[PAGE ISSUE]: 'Writing custom platform-specific code'"", 'type': 'issue'}
 {'action': 'created', 'author': 'danagbemava-nc', 'comment_id': 1054246398.0, 'datetime': '2022-02-28 13:16:11+00:00', 'masked_author': 'username_1', 'text': 'Hi @username_0, did you open the `android` folder and edit the `MainActivity.java`? Or were you in the root folder when you were seeing these errors?', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'dnparadice', 'comment_id': 1056083329.0, 'datetime': '2022-03-02 02:42:24+00:00', 'masked_author': 'username_0', 'text': 'does this demo work for kotlin or only java? \r\n\r\nThanks \r\n-Jayson', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'danagbemava-nc', 'comment_id': 1056837472.0, 'datetime': '2022-03-02 11:44:36+00:00', 'masked_author': 'username_1', 'text': 'This import is not correct btw\r\n\r\nThe doc outlines steps for you to open the android folder in android studio.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'dnparadice', 'comment_id': 1057004144.0, 'datetime': '2022-03-02 14:40:37+00:00', 'masked_author': 'username_0', 'text': 'And the following code is: \r\n```\r\nimport androidx.annotation.NonNull\r\nimport io.flutter.embedding.android.FlutterActivity\r\nimport io.flutter.embedding.engine.FlutterEngine\r\nimport io.flutter.plugin.common.MethodChannel\r\n\r\nclass MainActivity: FlutterActivity() {\r\n  private val CHANNEL = ""samples.flutter.dev/battery""\r\n\r\n  override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {\r\n    super.configureFlutterEngine(flutterEngine)\r\n    MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {\r\n      call, result ->\r\n      // Note: this method is invoked on the main thread.\r\n      // TODO\r\n    }\r\n  }\r\n}\r\n```\r\nAt this point in android studio the the imports can not be resolved. There is something missing here. Either I have a bad configuration somewhere or the \'flutter create\' made a bogus project. So if the issue is that I have a bad configuration, I would like for the demo to let me know the versions required to run the demo so I can configure my system to match the required build tools. If the requirements for the demo are not stated I expect flutter to be able to use any version to make a viable project. \r\n\r\nYou said that the imports I used are incorrect, but they are the imports stated on the demo page so I\'m not sure what that means when you say that they are incorrect. I am trying to use the code on the demo page as stated. What is incorrect about the import? \r\n\r\nThanks \r\n-Jayson \r\n<img width=""1600"" alt=""Screen Shot 2022-03-02 at 6 48 05 AM"" src=""https://user-images.githubusercontent.com/37160154/156382732-4c5f1fa5-1f5f-4eba-a2a3-8e929996221c.png"">', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'danagbemava-nc', 'comment_id': 1057847246.0, 'datetime': '2022-03-03 09:29:36+00:00', 'masked_author': 'username_1', 'text': 'This is because you are trying to edit an `android` project in a flutter project if that makes sense. What you need to do and is stated in the documentation is to open the `android` folder as a project on its own. \r\n\r\n![Screenshot 2022-03-03 at 09 20 02](https://user-images.githubusercontent.com/88313112/156534762-6f6742a4-95d2-4ddf-b036-f22695120d3d.png)\r\n\r\nAlso notice that in your screenshot the plugin shows an option for you to ""Open for editing in android studio"". That is because atm, the two projects are not entirely interoperable. See https://github.com/flutter/flutter-intellij/issues/4819\r\n\r\n\r\nKindly take a look at the screen recording below to see what I mean.\r\n\r\n\r\nhttps://user-images.githubusercontent.com/88313112/156535520-3f22710a-7a77-45ac-92b5-ecc11d26175a.mov', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'dnparadice', 'comment_id': 1063589253.0, 'datetime': '2022-03-10 02:28:24+00:00', 'masked_author': 'username_0', 'text': 'Hello @username_1, Awesome! Thanks for pointing out that you cant view an android project without errors in a flutter project (without changing a setting). It would be cool to have some reference to this issue in the example as it is not obvious that you can not just open the kotlin code in the flutter project. Based on the issue https://github.com/flutter/flutter-intellij/issues/4819\r\nit would be reasonable to have the demo tell people to change the settings in android studio so they can see the kotlin and the flutter code in the same project.', 'title': None, 'type': 'comment'}
 {'action': 'closed', 'author': 'dnparadice', 'comment_id': None, 'datetime': '2022-03-10 02:28:24+00:00', 'masked_author': 'username_0', 'text': '', 'title': None, 'type': 'issue'}]","<issue_start><issue_comment>Title: [PAGE ISSUE]: 'Writing custom platform-specific code'
username_0: ### Page URL

https://docs.flutter.dev/development/platform-integration/platform-channels/

### Page source

https://github.com/flutter/website/tree/main/src/development/platform-integration/platform-channels.md

### Describe the problem

Cant resolve NoNull, embedding, or plugin for the imports:

import androidx.annotation.NoNull;
import io.flutter.embedding.android.FlutterActivity;
import io.flutter.embedding.engine.FlutterEngine;
import io.flutter.plugin.common.MethodChannel;

Flutter doctor returns: 

[✓] Flutter (Channel stable, 2.10.2, on macOS 11.4 20F71 darwin-x64, locale en-US)
[✓] Android toolchain - develop for Android devices (Android SDK version 33.0.0-rc1)
[!] Xcode - develop for iOS and macOS (Xcode 12.5.1)
    ! Flutter recommends a minimum Xcode version of 13.
      Download the latest version or update via the Mac App Store.
[✓] Chrome - develop for the web
[✓] Android Studio (version 4.2)
[✓] Connected device (3 available)
[✓] HTTP Host Availability


### Expected fix

1) Offer a solution to resolve dependency issues in demo project, even if that is a link to how to fix gradle or whatever is causing the dependency issue. 
2) Specify dependency tree for the demo project, for each of the required tools if flutter is not able to resolve these dependancies automatically. 
3) default flutter new project configuration is Kotlin but the example source on github is in Java so you cant see a kotlin version of the code. 

### Additional context

_No response_
<issue_comment>username_1: Hi @username_0, did you open the `android` folder and edit the `MainActivity.java`? Or were you in the root folder when you were seeing these errors?
<issue_comment>username_0: does this demo work for kotlin or only java? 

Thanks 
-Jayson
<issue_comment>username_1: This import is not correct btw

The doc outlines steps for you to open the android folder in android studio.
<issue_comment>username_0: And the following code is: 
```
import androidx.annotation.NonNull
import io.flutter.embedding.android.FlutterActivity
import io.flutter.embedding.engine.FlutterEngine
import io.flutter.plugin.common.MethodChannel

class MainActivity: FlutterActivity() {
  private val CHANNEL = ""samples.flutter.dev/battery""

  override fun configureFlutterEngine(@NonNull flutterEngine: FlutterEngine) {
    super.configureFlutterEngine(flutterEngine)
    MethodChannel(flutterEngine.dartExecutor.binaryMessenger, CHANNEL).setMethodCallHandler {
      call, result ->
      // Note: this method is invoked on the main thread.
      // TODO
    }
  }
}
```
At this point in android studio the the imports can not be resolved. There is something missing here. Either I have a bad configuration somewhere or the 'flutter create' made a bogus project. So if the issue is that I have a bad configuration, I would like for the demo to let me know the versions required to run the demo so I can configure my system to match the required build tools. If the requirements for the demo are not stated I expect flutter to be able to use any version to make a viable project. 

You said that the imports I used are incorrect, but they are the imports stated on the demo page so I'm not sure what that means when you say that they are incorrect. I am trying to use the code on the demo page as stated. What is incorrect about the import? 

Thanks 
-Jayson 
<img width=""1600"" alt=""Screen Shot 2022-03-02 at 6 48 05 AM"" src=""https://user-images.githubusercontent.com/37160154/156382732-4c5f1fa5-1f5f-4eba-a2a3-8e929996221c.png"">
<issue_comment>username_1: This is because you are trying to edit an `android` project in a flutter project if that makes sense. What you need to do and is stated in the documentation is to open the `android` folder as a project on its own. 

![Screenshot 2022-03-03 at 09 20 02](https://user-images.githubusercontent.com/88313112/156534762-6f6742a4-95d2-4ddf-b036-f22695120d3d.png)

Also notice that in your screenshot the plugin shows an option for you to ""Open for editing in android studio"". That is because atm, the two projects are not entirely interoperable. See https://github.com/flutter/flutter-intellij/issues/4819


Kindly take a look at the screen recording below to see what I mean.


https://user-images.githubusercontent.com/88313112/156535520-3f22710a-7a77-45ac-92b5-ecc11d26175a.mov
<issue_comment>username_0: Hello @username_1, Awesome! Thanks for pointing out that you cant view an android project without errors in a flutter project (without changing a setting). It would be cool to have some reference to this issue in the example as it is not obvious that you can not just open the kotlin code in the flutter project. Based on the issue https://github.com/flutter/flutter-intellij/issues/4819
it would be reasonable to have the demo tell people to change the settings in android studio so they can see the kotlin and the flutter code in the same project.<issue_closed>"
facebook/docusaurus,737707842,3706,"{'number': 3706.0, 'repo': 'docusaurus', 'user_login': 'facebook'}","[{'action': 'opened', 'author': 'lex111', 'comment_id': None, 'datetime': '2020-11-06T12:04:54Z', 'masked_author': 'username_0', 'text': '<!--\r\nThank you for sending the PR! We appreciate you spending the time to work on these changes.\r\n\r\nHelp us understand your motivation by explaining why you decided to make this change.\r\n\r\nYou can learn more about contributing to Docusaurus here: https://github.com/facebook/docusaurus/blob/master/CONTRIBUTING.md\r\n\r\nHappy contributing!\r\n\r\n-->\r\n\r\n## Motivation\r\n\r\nI think we need to render all tab panels immediately during mounting Tabs component, because currently different side effects observer when navigating between tabs.\r\n\r\nFor example, if the tab content contains embedded code, then it will reload _every time_ we switch tabs, see the GIF on the React Native website example:\r\n\r\n![ezgif com-gif-maker (10)](https://user-images.githubusercontent.com/4408379/98363532-270b9b80-2040-11eb-97df-17c2e3324723.gif)\r\n\r\nIn addition, filtering rendering (as now) leads to additional overhead costs, this is especially noticeable on mobile devices (you can see the delay when switching tabs)\r\n\r\n### Have you read the [Contributing Guidelines on pull requests](https://github.com/facebook/docusaurus/blob/master/CONTRIBUTING.md#pull-requests)?\r\n\r\nYes\r\n\r\n## Test Plan\r\n\r\nPreview.\r\n\r\n## Related PRs\r\n\r\n(If this PR adds or changes functionality, please take some time to update the docs at https://github.com/facebook/docusaurus, and link to your PR here.)', 'title': 'refactor(v2): render all tab panels at once', 'type': 'issue'}
 {'action': 'created', 'author': 'slorber', 'comment_id': 723178611.0, 'datetime': '2020-11-06 16:40:19+00:00', 'masked_author': 'username_1', 'text': ""I don't think we should always render eagerly each tab.\r\n\r\nIn the case of RN, each snack code block is an iframe, loading eagerly iframes can be expensive, particularly when we are likely to only show one, as most users will not switch tabs, so I'd rather keep the lazy behavior even if it requires more integration code (cc @Simek)\r\n\r\nBut an option to customize this behavior could be useful. Rendering eagerly would also permit to have all tabs be SEO indexed more easily.\r\n\r\nWhich default value to use? Should we prioritize performance or SEO?\r\n\r\nReact-navigation tabs are lazy by default: https://reactnavigation.org/docs/bottom-tab-navigator/#lazy\r\nBut they do not care about SEO"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'lex111', 'comment_id': 723187411.0, 'datetime': '2020-11-06 16:56:40+00:00', 'masked_author': 'username_0', 'text': ""It's different since it is React Native so makes sense to use lazy loading on mobiles."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'slorber', 'comment_id': 723214604.0, 'datetime': '2020-11-06 17:50:54+00:00', 'masked_author': 'username_1', 'text': 'In v1 I don\'t know if they had much tabs. Wasn\'t able to find any in RN 0.59.\r\n\r\nLet\'s compare before/after on a page with 4 snack examples\r\n- https://archive.reactnative.dev/docs/flexbox\r\n- https://reactnative.dev/docs/flexbox\r\n\r\nWith eager behavior, the 2nd would render 8 iframes\r\nWith lazy behavior, the 2nd would render 4 iframes\r\n\r\nI\'d rather have only 4 iframes, but maybe 8 wouldn\'t be a problem.\r\n\r\nIt\'s also possible to add a loading=""lazy"" attributes on the Snack iframes: https://web.dev/iframe-lazy-loading/\r\n\r\nWonder what @Simek and @username_2 (working on Snack) think about this, but I guess too many iframes loaded could be a problem, and the RN website is likely to add more examples of this kind over time.\r\n\r\nI think we should keep an option for lazy loading tabs in all cases, and changing the default behavior can be considered a breaking change. Snacks wouldn\'t benefit from SEO/indexing in any way and lazy loading is better in such case.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'lex111', 'comment_id': 723223258.0, 'datetime': '2020-11-06 18:08:57+00:00', 'masked_author': 'username_0', 'text': ""This is a rather specific use case, in most cases we are dealing with static content in tabs, which would be nice to be indexed by search robots by default. But originally I was worried about how tabs were rendered on mobile devices. On _not_ the most modern/powerful mobiles there is  appreciable delay in navigating between tabs, so I would like to avoid it.\r\n\r\nI don't mind adding control of this behavior via new prop, for example, but if we can lazily loading iframes, then maybe we shouldn't do it?"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'slorber', 'comment_id': 724036556.0, 'datetime': '2020-11-09 14:10:14+00:00', 'masked_author': 'username_1', 'text': ""I think having a lazy boolean prop would still be helpful in some cases. \r\n\r\nAlso it's a behavior change, if users expected the tabs to be lazy, maybe making them eager would break their site for some reason, and we'd rather provide an option to allow previous behavior.\r\n\r\nloading=lazy is not widely supported yet and give less control to the user, and will not apply in all situations"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'lex111', 'comment_id': 724087832.0, 'datetime': '2020-11-09 15:33:02+00:00', 'masked_author': 'username_0', 'text': 'Done, feel free to edit the docs if you see fit.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'slorber', 'comment_id': 724108592.0, 'datetime': '2020-11-09 16:05:56+00:00', 'masked_author': 'username_1', 'text': 'FYI @Simek, on next release the snack player remark plugin should maybe use this new lazy attribute to keep existing behavior.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'IjzerenHein', 'comment_id': 724768121.0, 'datetime': '2020-11-10 15:16:19+00:00', 'masked_author': 'username_2', 'text': ""@username_1 I don't have a strong preference in this, but loading less always seems like a good idea. If possible, lazy loading the Snack iFrames seems smart. I would try to prevent to load too many Snack iFrames at the same time if possible though, and be mindful of the CPU and network usage.\r\n\r\nAs for Snack loading times. We are just in the process of rolling out some performance improvements. After this, consecutive loads of the web-preview should be snappier and close to near instant."", 'title': None, 'type': 'comment'}]","<issue_start><issue_comment>Title: refactor(v2): render all tab panels at once
username_0: <!--
Thank you for sending the PR! We appreciate you spending the time to work on these changes.

Help us understand your motivation by explaining why you decided to make this change.

You can learn more about contributing to Docusaurus here: https://github.com/facebook/docusaurus/blob/master/CONTRIBUTING.md

Happy contributing!

-->

## Motivation

I think we need to render all tab panels immediately during mounting Tabs component, because currently different side effects observer when navigating between tabs.

For example, if the tab content contains embedded code, then it will reload _every time_ we switch tabs, see the GIF on the React Native website example:

![ezgif com-gif-maker (10)](https://user-images.githubusercontent.com/4408379/98363532-270b9b80-2040-11eb-97df-17c2e3324723.gif)

In addition, filtering rendering (as now) leads to additional overhead costs, this is especially noticeable on mobile devices (you can see the delay when switching tabs)

### Have you read the [Contributing Guidelines on pull requests](https://github.com/facebook/docusaurus/blob/master/CONTRIBUTING.md#pull-requests)?

Yes

## Test Plan

Preview.

## Related PRs

(If this PR adds or changes functionality, please take some time to update the docs at https://github.com/facebook/docusaurus, and link to your PR here.)
<issue_comment>username_1: I don't think we should always render eagerly each tab.

In the case of RN, each snack code block is an iframe, loading eagerly iframes can be expensive, particularly when we are likely to only show one, as most users will not switch tabs, so I'd rather keep the lazy behavior even if it requires more integration code (cc @Simek)

But an option to customize this behavior could be useful. Rendering eagerly would also permit to have all tabs be SEO indexed more easily.

Which default value to use? Should we prioritize performance or SEO?

React-navigation tabs are lazy by default: https://reactnavigation.org/docs/bottom-tab-navigator/#lazy
But they do not care about SEO
<issue_comment>username_0: It's different since it is React Native so makes sense to use lazy loading on mobiles.
<issue_comment>username_1: In v1 I don't know if they had much tabs. Wasn't able to find any in RN 0.59.

Let's compare before/after on a page with 4 snack examples
- https://archive.reactnative.dev/docs/flexbox
- https://reactnative.dev/docs/flexbox

With eager behavior, the 2nd would render 8 iframes
With lazy behavior, the 2nd would render 4 iframes

I'd rather have only 4 iframes, but maybe 8 wouldn't be a problem.

It's also possible to add a loading=""lazy"" attributes on the Snack iframes: https://web.dev/iframe-lazy-loading/

Wonder what @Simek and @username_2 (working on Snack) think about this, but I guess too many iframes loaded could be a problem, and the RN website is likely to add more examples of this kind over time.

I think we should keep an option for lazy loading tabs in all cases, and changing the default behavior can be considered a breaking change. Snacks wouldn't benefit from SEO/indexing in any way and lazy loading is better in such case.
<issue_comment>username_0: This is a rather specific use case, in most cases we are dealing with static content in tabs, which would be nice to be indexed by search robots by default. But originally I was worried about how tabs were rendered on mobile devices. On _not_ the most modern/powerful mobiles there is  appreciable delay in navigating between tabs, so I would like to avoid it.

I don't mind adding control of this behavior via new prop, for example, but if we can lazily loading iframes, then maybe we shouldn't do it?
<issue_comment>username_1: I think having a lazy boolean prop would still be helpful in some cases. 

Also it's a behavior change, if users expected the tabs to be lazy, maybe making them eager would break their site for some reason, and we'd rather provide an option to allow previous behavior.

loading=lazy is not widely supported yet and give less control to the user, and will not apply in all situations
<issue_comment>username_0: Done, feel free to edit the docs if you see fit.
<issue_comment>username_1: FYI @Simek, on next release the snack player remark plugin should maybe use this new lazy attribute to keep existing behavior.
<issue_comment>username_2: @username_1 I don't have a strong preference in this, but loading less always seems like a good idea. If possible, lazy loading the Snack iFrames seems smart. I would try to prevent to load too many Snack iFrames at the same time if possible though, and be mindful of the CPU and network usage.

As for Snack loading times. We are just in the process of rolling out some performance improvements. After this, consecutive loads of the web-preview should be snappier and close to near instant."
gohugoio/hugo,512720648,6456,,"[{'action': 'opened', 'author': 'gcushen', 'comment_id': None, 'datetime': '2019-10-25 21:05:30+00:00', 'masked_author': 'username_0', 'text': '### What version of Hugo are you using (`hugo version`)?\r\n\r\nv0.58.1\r\n\r\n### Does this issue reproduce with the latest release?\r\n\r\nThere are at least two ways to set the environment to development or production in Hugo.\r\n\r\nMany users are reporting very confusing behavior to us in the way that `hugo.Environment` ignores `getenv ""HUGO_ENV""`.\r\n\r\nSurely, the following statement should be true if either `HUGO_ENV=""production""` or if the `-e production` argument is provided, otherwise this behavior is very confusing to users:\r\n\r\n    {{ if eq (hugo.Environment) ""production"" }}', 'title': 'BUG: `hugo.Environment` ignores `getenv ""HUGO_ENV""`', 'type': 'issue'}
 {'action': 'created', 'author': 'bep', 'comment_id': 546516670.0, 'datetime': '2019-10-25 21:17:24+00:00', 'masked_author': 'username_1', 'text': 'You can use `HUGO_ENVIRONMENT`. Does the doc mention `HUGO_ENV`?', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'gcushen', 'comment_id': 546518874.0, 'datetime': '2019-10-25 21:25:23+00:00', 'masked_author': 'username_0', 'text': 'Thanks for clarifying.\r\n\r\nIt appears that both Netlify and Forestry use `HUGO_ENV` though, so it would be logical either they use `HUGO_ENVIRONMENT` or Hugo begins to understand `HUGO_ENV` as the Hugo.Environment?\r\n\r\nSee\r\n\r\n* https://gohugo.io/hosting-and-deployment/hosting-on-netlify/\r\n* https://forestry.io/docs/previews/build-commands/', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'bep', 'comment_id': 546520056.0, 'datetime': '2019-10-25 21:30:09+00:00', 'masked_author': 'username_1', 'text': 'You could start by removing the big BUG in the title, then, as this is obviously not that.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'gcushen', 'comment_id': 546521636.0, 'datetime': '2019-10-25 21:36:26+00:00', 'masked_author': 'username_0', 'text': ""Currently, the docs only appear to mention `HUGO_ENV` and not `HUGO_ENVIRONMENT`, hence it appeared to be a bug. Thanks for clarifying that it's an inconsistent use of environment within the community, and I've updated the title to reflect that :)\r\n\r\nI assume it would be beneficial to support `HUGO_ENV` in Hugo since a large number of Hugo powered Netlify and Forestry sites already use this approach."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'gcushen', 'comment_id': 546524056.0, 'datetime': '2019-10-25 21:46:15+00:00', 'masked_author': 'username_0', 'text': 'FYI [GitHub states that there are currently ~16,500 files (very rough max. proxy for sites) using the `HUGO_ENV` approach](https://github.com/search?q=HUGO_ENV&type=Code) - perhaps you might find that compelling enough to warrant supporting it as an environment?', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'ianrodrigues', 'comment_id': 557533090.0, 'datetime': '2019-11-22 13:32:49+00:00', 'masked_author': 'username_2', 'text': '+1 for supporting `HUGO_ENV`.', 'title': None, 'type': 'comment'}
 {'action': 'closed', 'author': 'bep', 'comment_id': None, 'datetime': '2019-11-25 18:12:24+00:00', 'masked_author': 'username_1', 'text': '', 'title': None, 'type': 'issue'}]","<issue_start><issue_comment>Title: BUG: `hugo.Environment` ignores `getenv ""HUGO_ENV""`
username_0: ### What version of Hugo are you using (`hugo version`)?

v0.58.1

### Does this issue reproduce with the latest release?

There are at least two ways to set the environment to development or production in Hugo.

Many users are reporting very confusing behavior to us in the way that `hugo.Environment` ignores `getenv ""HUGO_ENV""`.

Surely, the following statement should be true if either `HUGO_ENV=""production""` or if the `-e production` argument is provided, otherwise this behavior is very confusing to users:

    {{ if eq (hugo.Environment) ""production"" }}
<issue_comment>username_1: You can use `HUGO_ENVIRONMENT`. Does the doc mention `HUGO_ENV`?
<issue_comment>username_0: Thanks for clarifying.

It appears that both Netlify and Forestry use `HUGO_ENV` though, so it would be logical either they use `HUGO_ENVIRONMENT` or Hugo begins to understand `HUGO_ENV` as the Hugo.Environment?

See

* https://gohugo.io/hosting-and-deployment/hosting-on-netlify/
* https://forestry.io/docs/previews/build-commands/
<issue_comment>username_1: You could start by removing the big BUG in the title, then, as this is obviously not that.
<issue_comment>username_0: Currently, the docs only appear to mention `HUGO_ENV` and not `HUGO_ENVIRONMENT`, hence it appeared to be a bug. Thanks for clarifying that it's an inconsistent use of environment within the community, and I've updated the title to reflect that :)

I assume it would be beneficial to support `HUGO_ENV` in Hugo since a large number of Hugo powered Netlify and Forestry sites already use this approach.
<issue_comment>username_0: FYI [GitHub states that there are currently ~16,500 files (very rough max. proxy for sites) using the `HUGO_ENV` approach](https://github.com/search?q=HUGO_ENV&type=Code) - perhaps you might find that compelling enough to warrant supporting it as an environment?
<issue_comment>username_2: +1 for supporting `HUGO_ENV`.<issue_closed>"
AgileVentures/WebsiteOne,134209449,806,,"[{'action': 'opened', 'author': 'tansaku', 'comment_id': None, 'datetime': '2016-02-17 07:55:50+00:00', 'masked_author': 'username_0', 'text': '```\n Scenario: Insert media model rejects badly formatted youtube links                                      # features/documents.feature:170\n    Given I am logged in                                                                                  # features/step_definitions/user_steps.rb:19\n    And I am using the Mercury Editor to edit document ""Guides""                                           # features/step_definitions/mercury_steps.rb:27\n    And I am focused on the ""document body"" within the Mercury Editor                                     # features/step_definitions/contained_search_steps.rb:33\n    And I click on the ""Insert Media"" button within the Mercury Toolbar                                   # features/step_definitions/contained_search_steps.rb:33\n    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal # features/step_definitions/contained_search_steps.rb:33\n    And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33\n    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33\n      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)\n      ./features/step_definitions/basic_steps.rb:167:in `/^I should( not)? see ""([^""]*)""$/\'\n      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>\'\n      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/\'\n      features/documents.feature:177:in `Then I should see ""is invalid"" within the Mercury Modal\'\n    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61\n```\nFailing Scenarios:\ncucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links', 'title': 'intermittent js failure?', 'type': 'issue'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 185678303.0, 'datetime': '2016-02-18 11:42:51+00:00', 'masked_author': 'username_0', 'text': 'got this for a second time today on a trivial documentation update', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 185820537.0, 'datetime': '2016-02-18 17:16:33+00:00', 'masked_author': 'username_0', 'text': 'and a third:\n\n```\nFailing Scenarios:\ncucumber features/documents.feature:159 # Scenario: Insert media model accepts full url youtube links\ncucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 188745825.0, 'datetime': '2016-02-25 11:39:29+00:00', 'masked_author': 'username_0', 'text': 'and a forth: \n\n```\ncucumber features/documents.feature:159\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 190113165.0, 'datetime': '2016-02-29 09:09:38+00:00', 'masked_author': 'username_1', 'text': 'I get this quite frequently on my ci build of WSO which is basically a clone of the main one - it can happen two or three times in a row and then just work.....possibly a timing issue somewhere?', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 190601216.0, 'datetime': '2016-03-01 07:54:59+00:00', 'masked_author': 'username_0', 'text': 'most likely', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 190616055.0, 'datetime': '2016-03-01 08:46:24+00:00', 'masked_author': 'username_1', 'text': 'Could these two scenarios be disabled until someone looks at the issue?\r\nI get one or both failing pretty constantly on my semaphore build - it\'s only pot luck if it works or not.\r\nThe downside ofc to disabling is that nobody looks at them because the issue has ""gone away""...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 190860361.0, 'datetime': '2016-03-01 19:20:28+00:00', 'masked_author': 'username_0', 'text': 'yes, we need to get to the bottom of these - @decareano posted a great link on the subject in localsupport - if I can stabilize the grader I might try to make this my priority tomorrow: \r\n\r\nhttps://spin.atomicobject.com/2012/04/27/intermittent-test-failures/', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'mtc2013', 'comment_id': 191254988.0, 'datetime': '2016-03-02 14:21:33+00:00', 'masked_author': 'username_2', 'text': 'This intermittently failed for me:-\r\n\r\nFailures:\r\n\r\n  1) EventsController GET show assigns a event instance\r\n     Failure/Error: expect(assigns(:recent_hangout)).to eq(event_instance)\r\n       \r\n       expected: #<EventInstance id: 43, event_id: 23, title: ""Hangout_91"", hangout_url: ""http://hangout.test"", created_at: ""2016-03-02 14:16:09"", updated_at: ""2016-03-02 14:16:09"", uid: ""uid_102"", category: ""Category_89"", project_id: 41, user_id: 194, yt_video_id: ""yt_video_id_84"", participants: [[""91"", {:person=>{:displayName=>""Broadcaster91"", :id=>""youtube_id_91"", :isBroadcaster=>""true""}}], [""91"", {:person=>{:displayName=>""Participant_91"", :id=>""youtube_id_91"", :isBroadcaster=>""false""}}]], hoa_status: nil>\r\n            got: nil\r\n       \r\n       (compared using ==)\r\n     # ./spec/controllers/events_controller_spec.rb:32:in `block (3 levels) in <top (required)>\'', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 191287736.0, 'datetime': '2016-03-02 15:29:09+00:00', 'masked_author': 'username_0', 'text': 'got a random failure\r\n\r\n```\r\n(::) failed steps (::)\r\n\r\nexpected to find css ""img[src*=\\""/assets/mercury/missing-image.png\\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n./features/step_definitions/basic_steps.rb:348:in `/^I should see an image with source ""([^""]*)""$/\'\r\n./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>\'\r\n./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/\'\r\nfeatures/documents.feature:155:in `Then I should see an image with source ""/assets/mercury/missing-image.png"" within the Mercury Editor\'\r\n\r\nFailing Scenarios:\r\ncucumber features/documents.feature:146 # Scenario: Missing Image gets added when a user can inserts an invalid image\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 191644701.0, 'datetime': '2016-03-03 08:09:51+00:00', 'masked_author': 'username_0', 'text': 'I just got the same rspec failure as @username_2 had locally\r\n\r\n```\r\n  1) EventsController GET show assigns a event instance\r\n     Failure/Error: expect(assigns(:recent_hangout)).to eq(event_instance)\r\n       \r\n       expected: #<EventInstance id: 100, event_id: 92, title: ""Hangout_210"", hangout_url: ""http://hangout.test"", created_at: ""2016-03-03 08:05:58"", updated_at: ""2016-03-03 08:05:58"", uid: ""uid_224"", category: ""Category_186"", project_id: 211, user_id: 587, yt_video_id: ""yt_video_id_209"", participants: [[""216"", {:person=>{:displayName=>""Broadcaster216"", :id=>""youtube_id_216"", :isBroadcaster=>""true""}}], [""216"", {:person=>{:displayName=>""Participant_216"", :id=>""youtube_id_216"", :isBroadcaster=>""false""}}]], hoa_status: nil>\r\n            got: nil\r\n       \r\n       (compared using ==)\r\n     # ./spec/controllers/events_controller_spec.rb:32:in `block (3 levels) in <top (required)>\'\r\n```\r\n\r\nwent away on a second run ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 192214578.0, 'datetime': '2016-03-04 09:56:29+00:00', 'masked_author': 'username_0', 'text': 'just got three docs failures in CI again:\r\n\r\n```\r\ncucumber features/documents.feature:146 # Scenario: Missing Image gets added when a user can inserts an invalid image\r\ncucumber features/documents.feature:159 # Scenario: Insert media model accepts full url youtube links\r\ncucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 193158832.0, 'datetime': '2016-03-07 08:40:35+00:00', 'masked_author': 'username_0', 'text': 'this in @username_1s cucumber pull request: \r\n\r\n```\r\n  Scenario: Show a document                                      # features/documents.feature:47\r\n    Given I am on the ""Show"" page for project ""hello mars""       # features/step_definitions/basic_steps.rb:256\r\n    When I click the sidebar link ""Guides""                       # features/step_definitions/documents_steps.rb:44\r\n    Then I should be on the ""Show"" page for document ""Guides""    # features/step_definitions/basic_steps.rb:252\r\n    And I should see ""Guides""                                    # features/step_definitions/basic_steps.rb:185\r\n    And I should see ""New content 0""                             # features/step_definitions/basic_steps.rb:185\r\n    And I should see a link to ""Edit"" page for document ""Guides"" # features/step_definitions/basic_steps.rb:260\r\n      expected to find link or button nil with text ""Guides"" but there were no matches. Also found """", ""Log in"", ""Sign up"", """", """", ""About"", ""Projects"", ""Members"", ""Articles"", ""Events"", ""Upcoming events"", ""Past scrums"", ""Past events"", ""Getting started"", """", """", ""hello world"", ""Documentation"", """", ""hello mars"", """", """", """", ""Become a supporter"", ""×"", ""List of Projects"", ""hello mars"", ""Revisions"", ""comments powered by Disqus."", ""comments powered by Disqus"", ""About Us"", ""Getting Started"", ""Dashboard"", ""Facebook"", ""Twitter"", ""Makers Academy"", ""AirPair"", ""Becoming a sponsor"", ""anpch@example.com"", which matched the selector but not all filters. (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:263:in `/^I should( not be able to)? see a link to ""([^""]*)"" page for ([^""]*) ""([^""]*)""$/\'\r\n      features/documents.feature:54:in `And I should see a link to ""Edit"" page for document ""Guides""\'\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-03-12-33-13.782.html\r\n```\r\n\r\n```\r\n  @javascript\r\n  Scenario: Insert media model accepts full url youtube links                                                            # features/documents.feature:159\r\n    Given I am logged in                                                                                                 # features/step_definitions/user_steps.rb:19\r\n    And I am using the Mercury Editor to edit document ""Guides""                                                          # features/step_definitions/mercury_steps.rb:27\r\n    And I am focused on the ""document body"" within the Mercury Editor                                                    # features/step_definitions/contained_search_steps.rb:33\r\n    And I click on the ""Insert Media"" button within the Mercury Toolbar                                                  # features/step_definitions/contained_search_steps.rb:33\r\n    And I fill in ""YouTube URL"" with ""https://www.youtube.com/watch?v=foo"" within the Mercury Editor Modal               # features/step_definitions/contained_search_steps.rb:33\r\n    And I click ""Insert Media"" within the Mercury Editor Modal                                                           # features/step_definitions/contained_search_steps.rb:33\r\n    Then the Mercury Editor modal window should not be visible                                                           # features/step_definitions/mercury_steps.rb:61\r\n    And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find css ""iframe[src*=\\""http://www.youtube.com/embed/foo?wmode=transparent\\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:352:in `/^I should see an video with source ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:167:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor\'\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-03-12-33-37.869.html\r\n    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-03-12-33-37.869.png\r\n```\r\n\r\n```\r\nFailing Scenarios:\r\ncucumber features/documents.feature:47 # Scenario: Show a document\r\ncucumber features/documents.feature:159 # Scenario: Insert media model accepts full url youtube links\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 193224967.0, 'datetime': '2016-03-07 12:11:00+00:00', 'masked_author': 'username_0', 'text': 'so `cucumber features/documents.feature:47` was consistently failing for @username_1 while `cucumber features/documents.feature:159` is one of our intermittent failures ... highlighting how confusing intermittent failures can be', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'mtc2013', 'comment_id': 193805052.0, 'datetime': '2016-03-08 14:33:40+00:00', 'masked_author': 'username_2', 'text': '@mercury_step @javascript\r\n  Scenario: Editing Pitch content with Mercury Editor                                                    # features/projects.feature:184\r\n    Given I am logged in                                                                                 # features/step_definitions/user_steps.rb:19\r\n    And I am on the ""Show"" page for project ""hello mars""                                                 # features/step_definitions/basic_steps.rb:256\r\n    And I click the ""Join Project"" button                                                                # features/step_definitions/basic_steps.rb:77\r\n    And I am using the Mercury Editor to edit project ""hello mars""                                       # features/step_definitions/mercury_steps.rb:27\r\n    When I fill in the editable field ""Pitch"" for ""project"" with ""This is my exciting marketing content"" # features/step_definitions/mercury_steps.rb:9\r\n    And I click ""Save"" within Mercury Editor toolbar                                                     # features/step_definitions/mercury_steps.rb:1\r\n    Then I should see a flash ""The project has been successfully updated.""                               # features/step_definitions/basic_steps.rb:193\r\n      expected to find css "".alert"" with text ""The project has been successfully updated."" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:195:in `/^I should( not)? see a flash ""([^""]*)""$/\'\r\n      features/projects.feature:191:in `Then I should see a flash ""The project has been successfully updated.""\'\r\n    Then I should be on the ""Show"" page for project ""hello mars""                                         # features/step_definitions/basic_steps.rb:252\r\n    And I should see ""This is my exciting marketing content""                                             # features/step_definitions/basic_steps.rb:185\r\n    HTML screenshot: /Users/michael/Desktop/WebsiteOne/tmp/capybara/screenshot_2016-03-08-14-28-34.642.html\r\n    Image screenshot: /Users/michael/Desktop/WebsiteOne/tmp/capybara/screenshot_2016-03-08-14-28-34.642.png', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 197308639.0, 'datetime': '2016-03-16 12:53:27+00:00', 'masked_author': 'username_1', 'text': ""Is it me or is it getting worse?  I pretty much can't get any semaphore build green now...."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 197361557.0, 'datetime': '2016-03-16 14:44:45+00:00', 'masked_author': 'username_0', 'text': 'it feels like something is going on ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 197361656.0, 'datetime': '2016-03-16 14:45:06+00:00', 'masked_author': 'username_0', 'text': 'please post specifics of fails that you get here @username_1 - it helps us debug', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 197367942.0, 'datetime': '2016-03-16 14:57:17+00:00', 'masked_author': 'username_1', 'text': 'Some examples:\r\n```\r\nScenario: See my avatar on My account page                                                                      # features/users/avatar.feature:10\r\n    When I click pulldown link ""My account""                                                                       # features/step_definitions/user_steps.rb:259\r\n      Ambiguous match, found 2 elements matching link or button ""My account"" (Capybara::Ambiguous)\r\n      ./features/step_definitions/user_steps.rb:261:in `/^I click pulldown link ""([^""]*)""$/\'\r\n      features/users/avatar.feature:11:in `When I click pulldown link ""My account""\'\r\n    Then I should see my avatar image                                                                             # features/step_definitions/avatar_steps.rb:1\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-15-21-25-55.123.html\r\n```\r\n\r\n```\r\n@javascript\r\n  Scenario: Insert media model accepts full url youtube links                                                            # features/documents.feature:157\r\n    Given I am logged in                                                                                                 # features/step_definitions/user_steps.rb:19\r\n    And I am using the Mercury Editor to edit document ""Guides""                                                          # features/step_definitions/mercury_steps.rb:27\r\n    And I am focused on the ""document body"" within the Mercury Editor                                                    # features/step_definitions/contained_search_steps.rb:33\r\n    And I click on the ""Insert Media"" button within the Mercury Toolbar                                                  # features/step_definitions/contained_search_steps.rb:33\r\n    And I fill in ""YouTube URL"" with ""https://www.youtube.com/watch?v=foo"" within the Mercury Editor Modal               # features/step_definitions/contained_search_steps.rb:33\r\n    And I click ""Insert Media"" within the Mercury Editor Modal                                                           # features/step_definitions/contained_search_steps.rb:33\r\n    Then the Mercury Editor modal window should not be visible                                                           # features/step_definitions/mercury_steps.rb:61\r\n    And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find css ""iframe[src*=\\""http://www.youtube.com/embed/foo?wmode=transparent\\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:356:in `/^I should see an video with source ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:165:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor\'\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-16-09-23-59.288.html\r\n    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-16-09-23-59.288.png\r\n```\r\n\r\n```\r\n@javascript\r\n  Scenario: Closing an existing video and opening a new one should update the player # features/scrums.feature:19\r\n    Given I visit ""/scrums""                                                          # features/step_definitions/basic_steps.rb:60\r\n    And I click the first scrum in the timeline                                      # features/step_definitions/scrums_steps.rb:24\r\n    Then I should see a modal window with the first scrum                            # features/step_definitions/scrums_steps.rb:13\r\n    When I close the modal                                                           # features/step_definitions/scrums_steps.rb:36\r\n    And I click the second scrum in the timeline                                     # features/step_definitions/scrums_steps.rb:30\r\n    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13\r\n      expected to find css ""#playerTitle"" but there were no matches. Also found """", which matched the selector but not all filters. (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/scrums_steps.rb:17:in `/^I should see a modal window with the (first|second) scrum$/\'\r\n      features/scrums.feature:25:in `Then I should see a modal window with the second scrum\'\r\ncapybara-screenshot could not detect a screenshot driver for \'poltergeist_debug\'. Saving with default with unknown results.\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-01-04.211.html\r\n    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-01-04.211.png\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 198246545.0, 'datetime': '2016-03-18 08:09:59+00:00', 'masked_author': 'username_0', 'text': ""thanks @username_1 - I've been trying to mark the intermittent failure points in this branch: https://github.com/AgileVentures/WebsiteOne/tree/806_failure_points which also uses some cucumber hooks to try and give those scenarios longer to run.\r\n\r\nI suspect that we won't be able to achieve stability without losing some functionality or adding proper sandboxing via puffing_billy or possibly both"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 198364701.0, 'datetime': '2016-03-18 13:40:20+00:00', 'masked_author': 'username_1', 'text': ""hmm...may be beyond my current skill level so no promises but I'll see what I can do...."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 198955998.0, 'datetime': '2016-03-20 16:13:17+00:00', 'masked_author': 'username_1', 'text': 'The Mercury Editor tests seem failing before it even gets to post to youtube so puffing_billy won\'t help here.\r\nThis is the sort of thing I see for example when the ""Insert media model accepts full url youtube links"" scenario fails:\r\n![image](https://cloud.githubusercontent.com/assets/1401069/13905337/fb24eb6e-eeb4-11e5-99fe-27f96024a84a.png)\r\nWhere it failed to fill in the YouTube URL field so there is nothing on screen when submit is pressed so validation is failing.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 199164649.0, 'datetime': '2016-03-21 08:03:34+00:00', 'masked_author': 'username_1', 'text': ""I increased the timeout and did a load of builds (21 at last count) here:\r\n\r\nhttps://semaphoreci.com/username_1/websiteone/branches/806_intermittent_failures\r\n\r\nAnd a lot of them worked, more than some of the other builds of different branches that I kicked off around the same time - though I did get one new failure:\r\n\r\n![image](https://cloud.githubusercontent.com/assets/1401069/13912987/6e9e984e-ef3a-11e5-842b-2892c178ea5d.png)\r\n\r\nAs I said yesterday, I think it is largely, if not entirely, down to not entering the YouTuble URL video so validation fails and the page is never submitted.\r\nI tried various things to select the radio button next to it first (rather than start typing in the text field, which results in the radio being selected) but I couldn't find the radio on the page - I don't know if it is the complexity of having this as an iframe or just my lack of capybara skills, but trying various suggestions from mr google - xpath selections, css finds etc, didn't work for me....and perhaps wouldn't have made any difference anyway..."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 199181294.0, 'datetime': '2016-03-21 08:54:02+00:00', 'masked_author': 'username_0', 'text': 'Thanks for this review.\r\n\r\nI think puffing billy might still help because we are not ""posting to youtube"", we are posting to our own server.  What puffing billy sandboxes is not a post to our own server (which we complete in these acceptance tests), but all the network connections going out from the browser to load remote javascripts and images etc.  All things that can block and slow things down and create intermittent failures when javascript is trying to get the right forms on the screen.\r\n\r\nYou might be right that it won\'t help in this case, but we do need to add it, and we should try it.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 199182467.0, 'datetime': '2016-03-21 09:01:26+00:00', 'masked_author': 'username_1', 'text': '@username_0 If you look at the screenshot from the weekend though, the form is indeed loaded\r\nThe problem is there is nothing filled in on the form because this\r\n`And I fill in ""YouTube URL"" with ""https://www.youtube.com/watch?v=foo"" within the Mercury Editor Modal`\r\nisn\'t actually filling in the form.\r\nEven if some remote javascript hadn\'t loaded, would that affect capybara finding the control and populating it?  capybara itself is already loaded and has been able to bring up the form by clicking on a link or button....', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 199200368.0, 'datetime': '2016-03-21 09:53:59+00:00', 'masked_author': 'username_0', 'text': 'It\'s a wild card so its something we should lock down.  I find that part of the trick to making progress with this kind of error is to not be a stickler for the logic of it, but make sure the hatches are battened down.\r\n\r\nAlso you don\'t know that the screenshot is completely accurate.  Anyway, there comes a point that if you don\'t have a specific alternative to try, then why not ""just try"" the thing that I am suggesting, even if at the moment you can\'t see the logic of it ...? :-)\r\n\r\nWe can argue back and forth the logic which takes up a lot of time - more time than actually just trying it perhaps ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 199207547.0, 'datetime': '2016-03-21 10:02:52+00:00', 'masked_author': 'username_1', 'text': ""Fair enough.  I would like to have tried selecting the radio button rather than relying on the focus of the text box magically selecting it, but I couldn't get that working.\r\nsetting up puffing billy is beyond me at the moment - I've only barely scratched the surface of WSO to understand it, nevermind this added complexity - back to you or some other volunteer I'm afraid...."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 199820542.0, 'datetime': '2016-03-22 13:41:35+00:00', 'masked_author': 'username_0', 'text': 'fair enough - see #932', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206335095.0, 'datetime': '2016-04-06 11:54:27+00:00', 'masked_author': 'username_0', 'text': 'More failures:\r\n\r\n```\r\ncucumber -p semaphoreci features/documents.feature:157 # Scenario: Insert media model accepts full url youtube links\r\ncucumber -p semaphoreci features/documents.feature:168 # Scenario: Insert media model rejects badly formatted youtube links\r\ncucumber -p semaphoreci features/scrums.feature:19 # Scenario: Closing an existing video and opening a new one should update the player\r\n```\r\n\r\n@yggie I\'m trying to keep a record of all the places we see intermittent failures in this issue\r\n\r\n```\r\n    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13\r\n      expected ""display: none; "" to include ""display: block;"" (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/scrums_steps.rb:15:in `/^I should see a modal window with the (first|second) scrum$/\'\r\n      features/scrums.feature:25:in `Then I should see a modal window with the second scrum\'\r\n```\r\n\r\n```\r\n    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find text ""is invalid"" in ""Insert Media (images and videos)�� Images URL can\'t be blank Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:191:in `/^I should( not)? see ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:175:in `Then I should see ""is invalid"" within the Mercury Modal\'\r\n```\r\n\r\n```\r\n    And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find css ""iframe[src*=\\""http://www.youtube.com/embed/foo?wmode=transparent\\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:360:in `/^I should see an video with source ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:165:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor\'\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206335747.0, 'datetime': '2016-04-06 11:56:04+00:00', 'masked_author': 'username_0', 'text': 'and annoyingly our new stripe test has an intermittent failure too!\r\n\r\n```\r\ncucumber -p semaphoreci features/charge_activity.feature:6\r\n```\r\n\r\n```\r\nYour userAgent seems to be not supported by inline-style-prefixer. Feel free to open an issue.\r\n    And I fill in appropriate card details     # features/step_definitions/charge_steps.rb:1\r\n      Unable to find field ""cc-exp"" (Capybara::ElementNotFound)\r\n      ./features/step_definitions/charge_steps.rb:7:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/charge_steps.rb:3:in `/^I fill in appropriate card details$/\'\r\n      features/charge_activity.feature:9:in `And I fill in appropriate card details\'\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206397113.0, 'datetime': '2016-04-06 14:24:11+00:00', 'masked_author': 'username_0', 'text': 'and this one again:\r\n\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206410634.0, 'datetime': '2016-04-06 14:46:00+00:00', 'masked_author': 'username_0', 'text': 'and another:\r\n\r\n```\r\n    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13\r\n      expected ""display: none; "" to include ""display: block;"" (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/scrums_steps.rb:15:in `/^I should see a modal window with the (first|second) scrum$/\'\r\n      features/scrums.feature:25:in `Then I should see a modal window with the second scrum\'\r\n```\r\n\r\n```\r\ncucumber -p semaphoreci features/scrums.feature:19\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206413458.0, 'datetime': '2016-04-06 14:51:50+00:00', 'masked_author': 'username_0', 'text': 'this looks interesting: https://bibwild.wordpress.com/2016/02/18/struggling-towards-reliable-capybara-javascript-testing/', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206781230.0, 'datetime': '2016-04-07 09:29:59+00:00', 'masked_author': 'username_0', 'text': 'So I\'m focusing on this last individual failure `features/scrums.feature:19` and I note that if I reduce the timeout settings to 0 or 0.1 I get these kinds of errors:\r\n\r\n```\r\nScenario: Closing an existing video and opening a new one should update the player # features/scrums.feature:19\r\n    Given I visit ""/scrums""                                                          # features/step_definitions/basic_steps.rb:64\r\n    And I click the first scrum in the timeline                                      # features/step_definitions/scrums_steps.rb:24\r\n      Timed out waiting for response to {""id"":""d9ae4d24-8368-4982-9eaa-a8cee66f8880"",""name"":""body"",""args"":[]}. It\'s possible that this happened because something took a very long time (for example a page load was slow). If so, setting the Poltergeist :timeout option to a higher value will help (see the docs for details). If increasing the timeout does not help, this is probably a bug in Poltergeist - please report it to the issue tracker. (Capybara::Poltergeist::TimeoutError)\r\n      ./features/step_definitions/scrums_steps.rb:25:in `/^I click the first scrum in the timeline$/\'\r\n      features/scrums.feature:21:in `And I click the first scrum in the timeline\'\r\n```\r\n\r\nwhich are different in kind from the errors we get in batch.  With  a poltergeist timeout of 1 and a Capybara.default_max_wait_time of 1 the tests passes for me reliably on my laptop, when I have an internet connection.\r\n\r\nI note however that despite our attempt to plug the billy cache leaks that just from running this single test I have a set of new cache entries:\r\n\r\n```\r\n\tfeatures/req_cache/get_s.ytimg.com_915edb4b5f224648b2607dc57119661559439dc1.yml\r\n\tfeatures/req_cache/get_s.ytimg.com_97ea91ae8364c347e1bafbcf3a60d3830420c3e5.yml\r\n\tfeatures/req_cache/get_www.google.com_dda3078e234d52b37f250121ebb31829d67f6628.yml\r\n\tfeatures/req_cache/get_www.youtube.com_754eb41a2f135e6eafbc40d9a4acf987250d14d4.yml\r\n\tfeatures/req_cache/get_www.youtube.com_771e045e849dcf0e8325651601d2397edca211c9.yml\r\n\tfeatures/req_cache/get_www.youtube.com_7ce01254dc22fb0ec070a5d431931551248b7971.yml\r\n```\r\n\r\nindicating that this test is still hitting some remote servers ... none of which have signficant variation in their parameters ... but I note that several of them have (particularly the www.youtube.com ones) are getting 301 (moved permanently) responses and as a consequence may not be being cached effectively - I thought that puffing billy cached these by default, but there is an extra setting for that that I can add:\r\n\r\n```\r\n    non_successful_cache_disabled = false\r\n```\r\n\r\nI also note that if I wrap this test in a @vcr tag we also get server network connections being cached.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206824796.0, 'datetime': '2016-04-07 11:32:05+00:00', 'masked_author': 'username_0', 'text': 'hmm, interesting to note that if I put @vcr tags on the documents.feature (one of the prime culprits) I get a fresh load of billy leaks ...\r\n\r\n```\r\n\tfeatures/req_cache/get_a.disquscdn.com_005fa385265710de9b800462d9db61ef21ec4c99.yml\r\n\tfeatures/req_cache/get_a.disquscdn.com_2aa0b18e4bd9e580dc09cf4f417b21146ddf05b6.yml\r\n\tfeatures/req_cache/get_a.disquscdn.com_2bc23452ce0ff2a22e561bb4519a23945f0ba922.yml\r\n\tfeatures/req_cache/get_a.disquscdn.com_bca73df499bedab281bd05c54b027f262189d85d.yml\r\n\tfeatures/req_cache/get_a.disquscdn.com_d008b8a1c5d90ecb9fc1701353d06b9481fa230b.yml\r\n\tfeatures/req_cache/get_disqus.com_442dc930b209a7b62857b10a08ab762f55c39f56.yml\r\n\tfeatures/req_cache/get_google.com_8a28b678b788b1c051c987cd0d6f8c697a48b352.yml\r\n\tfeatures/req_cache/get_s.ytimg.com_915edb4b5f224648b2607dc57119661559439dc1.yml\r\n\tfeatures/req_cache/get_s.ytimg.com_97ea91ae8364c347e1bafbcf3a60d3830420c3e5.yml\r\n\tfeatures/req_cache/get_ssl.google-analytics.com_7b9a51d3b1e9af83bfc375f4813db28046b99513.yml\r\n\tfeatures/req_cache/get_www.google.com_dda3078e234d52b37f250121ebb31829d67f6628.yml\r\n\tfeatures/req_cache/get_www.youtube.com_36a2809495d3decd3d207abd85e5162a07e86986.yml\r\n\tfeatures/req_cache/get_www.youtube.com_e6558ad62c301081754b9ab9f6a15aeb1284f981.yml\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206826393.0, 'datetime': '2016-04-07 11:35:31+00:00', 'masked_author': 'username_0', 'text': ""what's really odd is that these billy leaks don't appear when running in batch (without vcr) - need to check variations ..."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206841047.0, 'datetime': '2016-04-07 12:08:55+00:00', 'masked_author': 'username_0', 'text': 'interesting - just running the document.feature by itself (without any vcr mods) generates new billy cache files, implying that somehow there is some different behaviour in terms of what sites the browser is hitting when we run the tests in batch and we run them at the feature file level.\r\n\r\nFor scrums I also saw this behaviour at the scenario level ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206843043.0, 'datetime': '2016-04-07 12:11:30+00:00', 'masked_author': 'username_0', 'text': ""this implies some fundamental inconsistency in the browser based behaviour depending on whether we are in batch mode or individual feature or scenario mode, which is not a good thing ... locking down everything with vcr and billy will help reduce variation, but if there is something else causing this change between the different running modes then we won't get stability until we can identify and then either patch or remove that underlying problem ..."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 206924394.0, 'datetime': '2016-04-07 14:11:27+00:00', 'masked_author': 'username_0', 'text': 'Options:\r\n\r\n1) comprehensive VCR sandboxing is required\r\n2) upgrading all the relevant gems, e.g. capybara, phantomjs, poltergeist etc.\r\n3) review features (and cucumber env settings one by one) --> start with a branch that had a single feature test - and check that passes on CI and developer machines, and then we would add in each acceptance in turn, checking what the tags mean - ensuring we have billy and vcr sandboxing, and working through everything to ensure maximum consistency ... could start with usual suspects', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 206982188.0, 'datetime': '2016-04-07 16:31:08+00:00', 'masked_author': 'username_1', 'text': ""At least some of the common failures are when trying to select form elements and no network traffic should be involved at that point, as we have discussed earlier in the thread.\r\nIt may be that the focus is in the wrong area since adding billy and/or vcr in those areas didn't fix the problems...so maybe it's more to do with field selection/validation than network reliability?\r\nSandboxing may be a good idea generally, but not necessarily as a solution to these failures..."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 208403010.0, 'datetime': '2016-04-11 15:31:44+00:00', 'masked_author': 'username_0', 'text': ""thanks @username_1 - it may well be that network sandboxing will not fix this, however note that previously I only added billy, not VCR.  What we have established so far is that billy by itself has not conclusively fixed these issues.  Network variability causing other tests to hang around and influence each other may still be a strong component of this problem, since VCR has not yet been added throughout for a complete sandbox.  \r\n\r\nThat's what we're doing in the cleanroom branch, as well as being on the lookout for other issues, but being able to do with a more manageable subset of the tests ... There seem to be several factors in play, and to be able to manage that I think we have to work hard to reduce all sources of external variation from our tests."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 209268661.0, 'datetime': '2016-04-13 07:20:30+00:00', 'masked_author': 'username_0', 'text': 'so got this with what we think is fully sandboxed code:\r\n\r\n```\r\n    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL can\'t be blank Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:191:in `/^I should( not)? see ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:174:in `Then I should see ""is invalid"" within the Mercury Modal\'\r\n```\r\n```\r\ncucumber -p semaphoreci features/documents.feature:167 # Scenario: Insert media model rejects badly formatted youtube links\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 209279025.0, 'datetime': '2016-04-13 07:34:13+00:00', 'masked_author': 'username_1', 'text': ""Ah that's annoying, *perhaps* leading to where I was going with it (ie not the lack of sandboxing being the issue) but still, lot of good work there so even if it doesn't help at all for this case, the tests should be more reliable overall I should think - so don't be disheartened!\r\nDoes this happen for you locally or was it a semaphore build that failed?\r\nDo you want people to blast it again a load of times to see if we get it?\r\nHave you tried it in an environment that wasn't a mac, maybe c9.io or an ubunto vm to see if you can get it to fail on a more regular basis and hopefully be easier to track down then?"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 209886932.0, 'datetime': '2016-04-14 11:17:49+00:00', 'masked_author': 'username_0', 'text': 'Another failure in a new location (this time in the old code):\r\n\r\n```\r\n And I create a document named ""A New Guide to the Galaxy"" # features/step_definitions/activity_feed_steps.rb:15\r\n    And I create a project named ""Build NCC-1701 Enterprise""  # features/step_definitions/activity_feed_steps.rb:25\r\n      Timed out waiting for response to {""id"":""2866f7e2-cdae-49c3-b35e-05b0eaad0654"",""name"":""click"",""args"":[11,6]}. It\'s possible that this happened because something took a very long time (for example a page load was slow). If so, setting the Poltergeist :timeout option to a higher value will help (see the docs for details). If increasing the timeout does not help, this is probably a bug in Poltergeist - please report it to the issue tracker. (Capybara::Poltergeist::TimeoutError)\r\n      ./features/step_definitions/basic_steps.rb:82:in `/^I click the ""([^""]*)"" button$/\'\r\n      ./features/step_definitions/activity_feed_steps.rb:26:in `/^I create a project named ""([^""]*)""$/\'\r\n      features/public_activity.feature:23:in `And I create a project named ""Build NCC-1701 Enterprise""\'\r\ncapybara-screenshot could not detect a screenshot driver for \'poltergeist_billy_debug\'. Saving with default with unknown results.\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-50.831.html\r\n    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-50.831.png\r\n\r\nFailing Scenarios:\r\ncucumber -p semaphoreci features/public_activity.feature:25\r\n```\r\n\r\n@username_1 to answer some of your questions:\r\n\r\n1) that was a failure on CI\r\n2) the latest (and now complete) cleanroom branch could be blasted a few times to see if we get local failures - @username_2 at least had none locally while we were developing the whole thing which involved about 40+ runs, and I only had one failure, but that was with some extra cache files that I then added ...\r\n3) we haven\'t tried on other platforms apart from it being run on @username_3, my and @username_2\'s systems.  A repeat run on C9 is a good idea - particularly in that all our projects should have C9 setup guides - I tried to reduce timeouts to make more reliable failures, but made no progress there.\r\n\r\nMy main plan of attack next is once we have the cleanroom in develop is wait for the next failure and then pounce on it for a detailed analysis with all networking variation removed ... there\'s also making the cleanroom work with ruby 2.3 ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'freeranger', 'comment_id': 209915849.0, 'datetime': '2016-04-14 12:33:20+00:00', 'masked_author': 'username_1', 'text': ""@username_0 Ok I'll try to get a c9 build up and running at the weekend and give it a good few runs."", 'title': None, 'type': 'comment'}
 {'action': 'closed', 'author': 'tansaku', 'comment_id': None, 'datetime': '2016-04-14 14:41:36+00:00', 'masked_author': 'username_0', 'text': '', 'title': None, 'type': 'issue'}
 {'action': 'reopened', 'author': 'tansaku', 'comment_id': None, 'datetime': '2016-04-14 14:52:37+00:00', 'masked_author': 'username_0', 'text': '```\n Scenario: Insert media model rejects badly formatted youtube links                                      # features/documents.feature:170\n    Given I am logged in                                                                                  # features/step_definitions/user_steps.rb:19\n    And I am using the Mercury Editor to edit document ""Guides""                                           # features/step_definitions/mercury_steps.rb:27\n    And I am focused on the ""document body"" within the Mercury Editor                                     # features/step_definitions/contained_search_steps.rb:33\n    And I click on the ""Insert Media"" button within the Mercury Toolbar                                   # features/step_definitions/contained_search_steps.rb:33\n    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal # features/step_definitions/contained_search_steps.rb:33\n    And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33\n    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33\n      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)\n      ./features/step_definitions/basic_steps.rb:167:in `/^I should( not)? see ""([^""]*)""$/\'\n      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>\'\n      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/\'\n      features/documents.feature:177:in `Then I should see ""is invalid"" within the Mercury Modal\'\n    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61\n```\nFailing Scenarios:\ncucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links', 'title': 'intermittent js failure?', 'type': 'issue'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 209984898.0, 'datetime': '2016-04-14 14:53:19+00:00', 'masked_author': 'username_0', 'text': 'just got this locally:\r\n\r\n```\r\nexpected to find css "".alert"" with text ""The project has been successfully updated."" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n./features/step_definitions/basic_steps.rb:199:in `/^I should( not)? see a flash ""([^""]*)""$/\'\r\nfeatures/projects.feature:192:in `Then I should see a flash ""The project has been successfully updated.""\'\r\n\r\nFailing Scenarios:\r\ncucumber features/projects.feature:185 # Scenario: Editing Pitch content with Mercury Editor\r\n```\r\n\r\nbut also had some stray network connections:\r\n\r\n```\r\n:scope: \r\n:url: http://csi.gstatic.com/csi?v=3&s=gwidget&action=hangout&it=wdi.116,wri.116&srt=21&e=abc_e81,abc_e97,abc_e100,abc_e122,abc_e123,abc_e30,abc_e79,abc_e127,abc_l0,abc_m0,abc_n0,abc_m0n0,abc_u0&rt=\r\n:body: \'\'\r\n:status: 204\r\n:method: get\r\n:headers:\r\n  Access-Control-Allow-Origin: ""*""\r\n  Date: Thu, 14 Apr 2016 14:45:53 GMT\r\n  Pragma: no-cache\r\n  Expires: Fri, 01 Jan 1990 00:00:00 GMT\r\n  Cache-Control: no-cache, no-store, must-revalidate\r\n  Last-Modified: Wed, 21 Jan 2004 19:51:30 GMT\r\n  Content-Type: image/gif\r\n  Server: Golfe2\r\n  Content-Length: \'0\'\r\n  Connection: close\r\n:content: \'\'\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 209998037.0, 'datetime': '2016-04-14 15:18:31+00:00', 'masked_author': 'username_0', 'text': 'another CI failure:\r\n\r\n```\r\n And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find css ""iframe[src*=\\""http://www.youtube.com/embed/foo?wmode=transparent\\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:360:in `/^I should see an video with source ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:164:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor\'\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-04-14-15-14-41.579.html\r\n    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-04-14-15-14-41.579.png\r\n```\r\n\r\n```\r\nFailing Scenarios:\r\ncucumber -p semaphoreci features/documents.feature:156 # Scenario: Insert media model accepts full url youtube links\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210466525.0, 'datetime': '2016-04-15 13:37:10+00:00', 'masked_author': 'username_0', 'text': ""So we've got several more intermittent fails on CI with the new setup:\r\n\r\n```\r\nfeatures/documents.feature:156\r\nfeatures/documents.feature:167\r\nfeatures/scrums.feature:22\r\n```\r\n\r\nThe new sandboxed setup seems (?) more stable on individual developer machines, but if anything these fails on CI seem even more common?  At least if something is reliably failing we have a better chance of fixing it ..."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210468511.0, 'datetime': '2016-04-15 13:41:25+00:00', 'masked_author': 'username_0', 'text': 'I was taking a little look at features/documents.feature:167 in more detail locally (it passes single and in batch on my local machine).\r\n\r\nIt occurred to me that perhaps there is a way to reset the JS browser inbetween test runs - which led me to find this post:\r\n\r\nhttps://github.com/teampoltergeist/poltergeist/issues/375\r\n\r\nwhich gives us another thing to experiment with.  What I tried first was printing out images around the elements that fails on CI like so:\r\n\r\n```gherkin\r\n  @javascript\r\n  Scenario: Insert media model rejects badly formatted youtube links\r\n    Given I am logged in\r\n    And I am using the Mercury Editor to edit document ""Guides""\r\n    And I am focused on the ""document body"" within the Mercury Editor\r\n    And I click on the ""Insert Media"" button within the Mercury Toolbar\r\n    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal\r\n    And save a screenshot of the page at ""/tmp/before_insert.png""\r\n    And I click ""Insert Media"" within the Mercury Editor Modal\r\n    And save a screenshot of the page at ""/tmp/after_insert.png""\r\n    Then I should see ""is invalid"" within the Mercury Modal\r\n    And the Mercury Editor modal window should be visible\r\n```\r\n\r\nnow interestingly that fails for me locally the way it fails on CI and the screen shots look like this:\r\n\r\n![before insert](https://www.dropbox.com/s/anompzapd8yx6im/Screenshot%202016-04-15%2014.41.10.png?dl=1)\r\n\r\n![after insert](https://www.dropbox.com/s/h4xmc59cleqfref/Screenshot%202016-04-15%2014.39.57.png?dl=1)', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210468921.0, 'datetime': '2016-04-15 13:43:06+00:00', 'masked_author': 'username_0', 'text': 'and the error I get is this:\r\n\r\n```\r\n  And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33\r\n    And save a screenshot of the page at ""/tmp/after_insert.png""                                          # features/step_definitions/basic_steps.rb:275\r\n    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33\r\n      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL can\'t be blank Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)\r\n      ./features/step_definitions/basic_steps.rb:191:in `/^I should( not)? see ""([^""]*)""$/\'\r\n      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>\'\r\n      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/\'\r\n      features/documents.feature:176:in `Then I should see ""is invalid"" within the Mercury Modal\'\r\n    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61\r\n    HTML screenshot: /Users/username_0/Documents/GitHub/AgileVentures/WebsiteOne/tmp/capybara/screenshot_2016-04-15-12-08-29.698.html\r\n    Image screenshot: /Users/username_0/Documents/GitHub/AgileVentures/WebsiteOne/tmp/capybara/screenshot_2016-04-15-12-08-29.698.png\r\n```\r\n\r\nand the dumped screen looks like this:\r\n\r\n![](https://www.dropbox.com/s/uu2ociscr188ih6/Screenshot%202016-04-15%2014.42.41.png?dl=1)  the same stuff that @username_1 was looking at previously ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210469766.0, 'datetime': '2016-04-15 13:46:03+00:00', 'masked_author': 'username_0', 'text': 'and this is kind of strange, since it makes it look like the youtube URL has been inserted correctly with the correct radiobutton clicked, but then after insert media is clicked the modal reloads with a different kind of issue?  Has the invalid issue appeared and then disappeared?  Are we running too fast or too slow here ... weird ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210470155.0, 'datetime': '2016-04-15 13:47:09+00:00', 'masked_author': 'username_0', 'text': 'but the interesting thing is that if I run this again it fails in precisely the same way ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210470791.0, 'datetime': '2016-04-15 13:49:23+00:00', 'masked_author': 'username_0', 'text': 'the presence of saving the first screenshot it what appears to force the failure ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210471200.0, 'datetime': '2016-04-15 13:50:56+00:00', 'masked_author': 'username_0', 'text': ""here's a save of the correct output from a passing run:\r\n\r\n![](https://www.dropbox.com/s/is2pbtbsg0l0vft/Screenshot%202016-04-15%2014.50.32.png?dl=1)"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210471933.0, 'datetime': '2016-04-15 13:53:49+00:00', 'masked_author': 'username_0', 'text': 'hmmm https://robots.thoughtbot.com/write-reliable-asynchronous-integration-tests-with-capybara', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210524926.0, 'datetime': '2016-04-15 16:13:10+00:00', 'masked_author': 'username_0', 'text': 'hmm, so I added a step to check the YouTube URL checkbox in the case of failure, and that works and I can see it is checked:\r\n\r\n![](https://www.dropbox.com/s/ajylxz9e0rzz48d/Screenshot%202016-04-15%2017.12.12.png?dl=1)\r\n\r\nbut we are still stuck with the other error message ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210545698.0, 'datetime': '2016-04-15 16:55:44+00:00', 'masked_author': 'username_0', 'text': 'so I\'ve added extra selectors of that YouTube checkbox in multiple places that might help with these document.feature issues. \r\n\r\nHowever we also have:\r\n\r\n```\r\n\r\n  @javascript\r\n  Scenario: Closing an existing video and opening a new one should update the player # features/scrums.feature:22\r\n    Given I visit ""/scrums""                                                          # features/step_definitions/basic_steps.rb:64\r\n    And I click the first scrum in the timeline                                      # features/step_definitions/scrums_steps.rb:24\r\n    Then I should see a modal window with the first scrum                            # features/step_definitions/scrums_steps.rb:13\r\n    When I close the modal                                                           # features/step_definitions/scrums_steps.rb:28\r\n    And I click the second scrum in the timeline                                     # features/step_definitions/scrums_steps.rb:24\r\n      Firing a click at co-ordinates [583.5, 403.5] failed. Poltergeist detected another element with CSS selector \'html body.modal-open div#wrap div#main div.container div.col-lg-9 div#scrumVideo.modal.fade.in div.modal-dialog div.modal-content div.modal-body div.video-container iframe\' at this position. It may be overlapping the element you are trying to interact with. If you don\'t care about overlapping elements, try using node.trigger(\'click\'). (Capybara::Poltergeist::MouseEventFailed)\r\n      ./features/step_definitions/scrums_steps.rb:25:in `/^I click the (first|second) scrum in the timeline$/\'\r\n      features/scrums.feature:27:in `And I click the second scrum in the timeline\'\r\n    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13\r\n    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-45.158.html\r\n    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-45.158.png\r\n```\r\n\r\nwhich is different again entirely ...', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210546052.0, 'datetime': '2016-04-15 16:57:05+00:00', 'masked_author': 'username_0', 'text': 'so we could try updating to:\r\n\r\n```\r\nWhen(/^I click the (first|second) scrum in the timeline$/) do |ordinal|\r\n  page.all(:css, ""a.scrum_yt_link"").send(ordinal.to_sym).trigger(\'click\')\r\nend\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'tansaku', 'comment_id': 210547376.0, 'datetime': '2016-04-15 17:00:24+00:00', 'masked_author': 'username_0', 'text': ""or perhaps better to make the closing of the modals more reliable we should have:\r\n\r\n```ruby\r\nWhen(/^I close the modal$/) do\r\n  page.find(:css,'.close').click\r\n  expect(page).not_to have_css('.close')\r\nend\r\n```"", 'title': None, 'type': 'comment'}
 {'action': 'closed', 'author': 'diraulo', 'comment_id': None, 'datetime': '2016-04-18 09:09:46+00:00', 'masked_author': 'username_3', 'text': '', 'title': None, 'type': 'issue'}
 {'action': 'reopened', 'author': 'tansaku', 'comment_id': None, 'datetime': '2016-04-18 12:39:37+00:00', 'masked_author': 'username_0', 'text': '```\n Scenario: Insert media model rejects badly formatted youtube links                                      # features/documents.feature:170\n    Given I am logged in                                                                                  # features/step_definitions/user_steps.rb:19\n    And I am using the Mercury Editor to edit document ""Guides""                                           # features/step_definitions/mercury_steps.rb:27\n    And I am focused on the ""document body"" within the Mercury Editor                                     # features/step_definitions/contained_search_steps.rb:33\n    And I click on the ""Insert Media"" button within the Mercury Toolbar                                   # features/step_definitions/contained_search_steps.rb:33\n    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal # features/step_definitions/contained_search_steps.rb:33\n    And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33\n    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33\n      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)\n      ./features/step_definitions/basic_steps.rb:167:in `/^I should( not)? see ""([^""]*)""$/\'\n      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>\'\n      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/\'\n      features/documents.feature:177:in `Then I should see ""is invalid"" within the Mercury Modal\'\n    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61\n```\nFailing Scenarios:\ncucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links', 'title': 'intermittent js failure?', 'type': 'issue'}
 {'action': 'closed', 'author': 'diraulo', 'comment_id': None, 'datetime': '2016-04-18 14:24:02+00:00', 'masked_author': 'username_3', 'text': '', 'title': None, 'type': 'issue'}]","<issue_start><issue_comment>Title: intermittent js failure?
username_0: ```
 Scenario: Insert media model rejects badly formatted youtube links                                      # features/documents.feature:170
    Given I am logged in                                                                                  # features/step_definitions/user_steps.rb:19
    And I am using the Mercury Editor to edit document ""Guides""                                           # features/step_definitions/mercury_steps.rb:27
    And I am focused on the ""document body"" within the Mercury Editor                                     # features/step_definitions/contained_search_steps.rb:33
    And I click on the ""Insert Media"" button within the Mercury Toolbar                                   # features/step_definitions/contained_search_steps.rb:33
    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal # features/step_definitions/contained_search_steps.rb:33
    And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33
    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33
      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:167:in `/^I should( not)? see ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/'
      features/documents.feature:177:in `Then I should see ""is invalid"" within the Mercury Modal'
    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61
```
Failing Scenarios:
cucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links
<issue_comment>username_0: got this for a second time today on a trivial documentation update
<issue_comment>username_0: and a third:

```
Failing Scenarios:
cucumber features/documents.feature:159 # Scenario: Insert media model accepts full url youtube links
cucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links
```
<issue_comment>username_0: and a forth: 

```
cucumber features/documents.feature:159
```
<issue_comment>username_1: I get this quite frequently on my ci build of WSO which is basically a clone of the main one - it can happen two or three times in a row and then just work.....possibly a timing issue somewhere?
<issue_comment>username_0: most likely
<issue_comment>username_1: Could these two scenarios be disabled until someone looks at the issue?
I get one or both failing pretty constantly on my semaphore build - it's only pot luck if it works or not.
The downside ofc to disabling is that nobody looks at them because the issue has ""gone away""...
<issue_comment>username_0: yes, we need to get to the bottom of these - @decareano posted a great link on the subject in localsupport - if I can stabilize the grader I might try to make this my priority tomorrow: 

https://spin.atomicobject.com/2012/04/27/intermittent-test-failures/
<issue_comment>username_2: This intermittently failed for me:-

Failures:

  1) EventsController GET show assigns a event instance
     Failure/Error: expect(assigns(:recent_hangout)).to eq(event_instance)
       
       expected: #<EventInstance id: 43, event_id: 23, title: ""Hangout_91"", hangout_url: ""http://hangout.test"", created_at: ""2016-03-02 14:16:09"", updated_at: ""2016-03-02 14:16:09"", uid: ""uid_102"", category: ""Category_89"", project_id: 41, user_id: 194, yt_video_id: ""yt_video_id_84"", participants: [[""91"", {:person=>{:displayName=>""Broadcaster91"", :id=>""youtube_id_91"", :isBroadcaster=>""true""}}], [""91"", {:person=>{:displayName=>""Participant_91"", :id=>""youtube_id_91"", :isBroadcaster=>""false""}}]], hoa_status: nil>
            got: nil
       
       (compared using ==)
     # ./spec/controllers/events_controller_spec.rb:32:in `block (3 levels) in <top (required)>'
<issue_comment>username_0: got a random failure

```
(::) failed steps (::)

expected to find css ""img[src*=\""/assets/mercury/missing-image.png\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/basic_steps.rb:348:in `/^I should see an image with source ""([^""]*)""$/'
./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>'
./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/'
features/documents.feature:155:in `Then I should see an image with source ""/assets/mercury/missing-image.png"" within the Mercury Editor'

Failing Scenarios:
cucumber features/documents.feature:146 # Scenario: Missing Image gets added when a user can inserts an invalid image
```
<issue_comment>username_0: I just got the same rspec failure as @username_2 had locally

```
  1) EventsController GET show assigns a event instance
     Failure/Error: expect(assigns(:recent_hangout)).to eq(event_instance)
       
       expected: #<EventInstance id: 100, event_id: 92, title: ""Hangout_210"", hangout_url: ""http://hangout.test"", created_at: ""2016-03-03 08:05:58"", updated_at: ""2016-03-03 08:05:58"", uid: ""uid_224"", category: ""Category_186"", project_id: 211, user_id: 587, yt_video_id: ""yt_video_id_209"", participants: [[""216"", {:person=>{:displayName=>""Broadcaster216"", :id=>""youtube_id_216"", :isBroadcaster=>""true""}}], [""216"", {:person=>{:displayName=>""Participant_216"", :id=>""youtube_id_216"", :isBroadcaster=>""false""}}]], hoa_status: nil>
            got: nil
       
       (compared using ==)
     # ./spec/controllers/events_controller_spec.rb:32:in `block (3 levels) in <top (required)>'
```

went away on a second run ...
<issue_comment>username_0: just got three docs failures in CI again:

```
cucumber features/documents.feature:146 # Scenario: Missing Image gets added when a user can inserts an invalid image
cucumber features/documents.feature:159 # Scenario: Insert media model accepts full url youtube links
cucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links
```
<issue_comment>username_0: this in @username_1s cucumber pull request: 

```
  Scenario: Show a document                                      # features/documents.feature:47
    Given I am on the ""Show"" page for project ""hello mars""       # features/step_definitions/basic_steps.rb:256
    When I click the sidebar link ""Guides""                       # features/step_definitions/documents_steps.rb:44
    Then I should be on the ""Show"" page for document ""Guides""    # features/step_definitions/basic_steps.rb:252
    And I should see ""Guides""                                    # features/step_definitions/basic_steps.rb:185
    And I should see ""New content 0""                             # features/step_definitions/basic_steps.rb:185
    And I should see a link to ""Edit"" page for document ""Guides"" # features/step_definitions/basic_steps.rb:260
      expected to find link or button nil with text ""Guides"" but there were no matches. Also found """", ""Log in"", ""Sign up"", """", """", ""About"", ""Projects"", ""Members"", ""Articles"", ""Events"", ""Upcoming events"", ""Past scrums"", ""Past events"", ""Getting started"", """", """", ""hello world"", ""Documentation"", """", ""hello mars"", """", """", """", ""Become a supporter"", ""×"", ""List of Projects"", ""hello mars"", ""Revisions"", ""comments powered by Disqus."", ""comments powered by Disqus"", ""About Us"", ""Getting Started"", ""Dashboard"", ""Facebook"", ""Twitter"", ""Makers Academy"", ""AirPair"", ""Becoming a sponsor"", ""info@agileventures.org"", which matched the selector but not all filters. (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:263:in `/^I should( not be able to)? see a link to ""([^""]*)"" page for ([^""]*) ""([^""]*)""$/'
      features/documents.feature:54:in `And I should see a link to ""Edit"" page for document ""Guides""'
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-03-12-33-13.782.html
```

```
  @javascript
  Scenario: Insert media model accepts full url youtube links                                                            # features/documents.feature:159
    Given I am logged in                                                                                                 # features/step_definitions/user_steps.rb:19
    And I am using the Mercury Editor to edit document ""Guides""                                                          # features/step_definitions/mercury_steps.rb:27
    And I am focused on the ""document body"" within the Mercury Editor                                                    # features/step_definitions/contained_search_steps.rb:33
    And I click on the ""Insert Media"" button within the Mercury Toolbar                                                  # features/step_definitions/contained_search_steps.rb:33
    And I fill in ""YouTube URL"" with ""https://www.youtube.com/watch?v=foo"" within the Mercury Editor Modal               # features/step_definitions/contained_search_steps.rb:33
    And I click ""Insert Media"" within the Mercury Editor Modal                                                           # features/step_definitions/contained_search_steps.rb:33
    Then the Mercury Editor modal window should not be visible                                                           # features/step_definitions/mercury_steps.rb:61
    And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33
      expected to find css ""iframe[src*=\""http://www.youtube.com/embed/foo?wmode=transparent\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:352:in `/^I should see an video with source ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/'
      features/documents.feature:167:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor'
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-03-12-33-37.869.html
    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-03-12-33-37.869.png
```

```
Failing Scenarios:
cucumber features/documents.feature:47 # Scenario: Show a document
cucumber features/documents.feature:159 # Scenario: Insert media model accepts full url youtube links
```
<issue_comment>username_0: so `cucumber features/documents.feature:47` was consistently failing for @username_1 while `cucumber features/documents.feature:159` is one of our intermittent failures ... highlighting how confusing intermittent failures can be
<issue_comment>username_2: @mercury_step @javascript
  Scenario: Editing Pitch content with Mercury Editor                                                    # features/projects.feature:184
    Given I am logged in                                                                                 # features/step_definitions/user_steps.rb:19
    And I am on the ""Show"" page for project ""hello mars""                                                 # features/step_definitions/basic_steps.rb:256
    And I click the ""Join Project"" button                                                                # features/step_definitions/basic_steps.rb:77
    And I am using the Mercury Editor to edit project ""hello mars""                                       # features/step_definitions/mercury_steps.rb:27
    When I fill in the editable field ""Pitch"" for ""project"" with ""This is my exciting marketing content"" # features/step_definitions/mercury_steps.rb:9
    And I click ""Save"" within Mercury Editor toolbar                                                     # features/step_definitions/mercury_steps.rb:1
    Then I should see a flash ""The project has been successfully updated.""                               # features/step_definitions/basic_steps.rb:193
      expected to find css "".alert"" with text ""The project has been successfully updated."" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:195:in `/^I should( not)? see a flash ""([^""]*)""$/'
      features/projects.feature:191:in `Then I should see a flash ""The project has been successfully updated.""'
    Then I should be on the ""Show"" page for project ""hello mars""                                         # features/step_definitions/basic_steps.rb:252
    And I should see ""This is my exciting marketing content""                                             # features/step_definitions/basic_steps.rb:185
    HTML screenshot: /Users/michael/Desktop/WebsiteOne/tmp/capybara/screenshot_2016-03-08-14-28-34.642.html
    Image screenshot: /Users/michael/Desktop/WebsiteOne/tmp/capybara/screenshot_2016-03-08-14-28-34.642.png
<issue_comment>username_1: Is it me or is it getting worse?  I pretty much can't get any semaphore build green now....
<issue_comment>username_0: it feels like something is going on ...
<issue_comment>username_0: please post specifics of fails that you get here @username_1 - it helps us debug
<issue_comment>username_1: Some examples:
```
Scenario: See my avatar on My account page                                                                      # features/users/avatar.feature:10
    When I click pulldown link ""My account""                                                                       # features/step_definitions/user_steps.rb:259
      Ambiguous match, found 2 elements matching link or button ""My account"" (Capybara::Ambiguous)
      ./features/step_definitions/user_steps.rb:261:in `/^I click pulldown link ""([^""]*)""$/'
      features/users/avatar.feature:11:in `When I click pulldown link ""My account""'
    Then I should see my avatar image                                                                             # features/step_definitions/avatar_steps.rb:1
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-15-21-25-55.123.html
```

```
@javascript
  Scenario: Insert media model accepts full url youtube links                                                            # features/documents.feature:157
    Given I am logged in                                                                                                 # features/step_definitions/user_steps.rb:19
    And I am using the Mercury Editor to edit document ""Guides""                                                          # features/step_definitions/mercury_steps.rb:27
    And I am focused on the ""document body"" within the Mercury Editor                                                    # features/step_definitions/contained_search_steps.rb:33
    And I click on the ""Insert Media"" button within the Mercury Toolbar                                                  # features/step_definitions/contained_search_steps.rb:33
    And I fill in ""YouTube URL"" with ""https://www.youtube.com/watch?v=foo"" within the Mercury Editor Modal               # features/step_definitions/contained_search_steps.rb:33
    And I click ""Insert Media"" within the Mercury Editor Modal                                                           # features/step_definitions/contained_search_steps.rb:33
    Then the Mercury Editor modal window should not be visible                                                           # features/step_definitions/mercury_steps.rb:61
    And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33
      expected to find css ""iframe[src*=\""http://www.youtube.com/embed/foo?wmode=transparent\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:356:in `/^I should see an video with source ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/'
      features/documents.feature:165:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor'
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-16-09-23-59.288.html
    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-03-16-09-23-59.288.png
```

```
@javascript
  Scenario: Closing an existing video and opening a new one should update the player # features/scrums.feature:19
    Given I visit ""/scrums""                                                          # features/step_definitions/basic_steps.rb:60
    And I click the first scrum in the timeline                                      # features/step_definitions/scrums_steps.rb:24
    Then I should see a modal window with the first scrum                            # features/step_definitions/scrums_steps.rb:13
    When I close the modal                                                           # features/step_definitions/scrums_steps.rb:36
    And I click the second scrum in the timeline                                     # features/step_definitions/scrums_steps.rb:30
    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13
      expected to find css ""#playerTitle"" but there were no matches. Also found """", which matched the selector but not all filters. (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/scrums_steps.rb:17:in `/^I should see a modal window with the (first|second) scrum$/'
      features/scrums.feature:25:in `Then I should see a modal window with the second scrum'
capybara-screenshot could not detect a screenshot driver for 'poltergeist_debug'. Saving with default with unknown results.
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-01-04.211.html
    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-01-04.211.png
```
<issue_comment>username_0: thanks @username_1 - I've been trying to mark the intermittent failure points in this branch: https://github.com/AgileVentures/WebsiteOne/tree/806_failure_points which also uses some cucumber hooks to try and give those scenarios longer to run.

I suspect that we won't be able to achieve stability without losing some functionality or adding proper sandboxing via puffing_billy or possibly both
<issue_comment>username_1: hmm...may be beyond my current skill level so no promises but I'll see what I can do....
<issue_comment>username_1: The Mercury Editor tests seem failing before it even gets to post to youtube so puffing_billy won't help here.
This is the sort of thing I see for example when the ""Insert media model accepts full url youtube links"" scenario fails:
![image](https://cloud.githubusercontent.com/assets/1401069/13905337/fb24eb6e-eeb4-11e5-99fe-27f96024a84a.png)
Where it failed to fill in the YouTube URL field so there is nothing on screen when submit is pressed so validation is failing.
<issue_comment>username_1: I increased the timeout and did a load of builds (21 at last count) here:

https://semaphoreci.com/username_1/websiteone/branches/806_intermittent_failures

And a lot of them worked, more than some of the other builds of different branches that I kicked off around the same time - though I did get one new failure:

![image](https://cloud.githubusercontent.com/assets/1401069/13912987/6e9e984e-ef3a-11e5-842b-2892c178ea5d.png)

As I said yesterday, I think it is largely, if not entirely, down to not entering the YouTuble URL video so validation fails and the page is never submitted.
I tried various things to select the radio button next to it first (rather than start typing in the text field, which results in the radio being selected) but I couldn't find the radio on the page - I don't know if it is the complexity of having this as an iframe or just my lack of capybara skills, but trying various suggestions from mr google - xpath selections, css finds etc, didn't work for me....and perhaps wouldn't have made any difference anyway...
<issue_comment>username_0: Thanks for this review.

I think puffing billy might still help because we are not ""posting to youtube"", we are posting to our own server.  What puffing billy sandboxes is not a post to our own server (which we complete in these acceptance tests), but all the network connections going out from the browser to load remote javascripts and images etc.  All things that can block and slow things down and create intermittent failures when javascript is trying to get the right forms on the screen.

You might be right that it won't help in this case, but we do need to add it, and we should try it.
<issue_comment>username_1: @username_0 If you look at the screenshot from the weekend though, the form is indeed loaded
The problem is there is nothing filled in on the form because this
`And I fill in ""YouTube URL"" with ""https://www.youtube.com/watch?v=foo"" within the Mercury Editor Modal`
isn't actually filling in the form.
Even if some remote javascript hadn't loaded, would that affect capybara finding the control and populating it?  capybara itself is already loaded and has been able to bring up the form by clicking on a link or button....
<issue_comment>username_0: It's a wild card so its something we should lock down.  I find that part of the trick to making progress with this kind of error is to not be a stickler for the logic of it, but make sure the hatches are battened down.

Also you don't know that the screenshot is completely accurate.  Anyway, there comes a point that if you don't have a specific alternative to try, then why not ""just try"" the thing that I am suggesting, even if at the moment you can't see the logic of it ...? :-)

We can argue back and forth the logic which takes up a lot of time - more time than actually just trying it perhaps ...
<issue_comment>username_1: Fair enough.  I would like to have tried selecting the radio button rather than relying on the focus of the text box magically selecting it, but I couldn't get that working.
setting up puffing billy is beyond me at the moment - I've only barely scratched the surface of WSO to understand it, nevermind this added complexity - back to you or some other volunteer I'm afraid....
<issue_comment>username_0: fair enough - see #932
<issue_comment>username_0: More failures:

```
cucumber -p semaphoreci features/documents.feature:157 # Scenario: Insert media model accepts full url youtube links
cucumber -p semaphoreci features/documents.feature:168 # Scenario: Insert media model rejects badly formatted youtube links
cucumber -p semaphoreci features/scrums.feature:19 # Scenario: Closing an existing video and opening a new one should update the player
```

@yggie I'm trying to keep a record of all the places we see intermittent failures in this issue

```
    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13
      expected ""display: none; "" to include ""display: block;"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/scrums_steps.rb:15:in `/^I should see a modal window with the (first|second) scrum$/'
      features/scrums.feature:25:in `Then I should see a modal window with the second scrum'
```

```
    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33
      expected to find text ""is invalid"" in ""Insert Media (images and videos)�� Images URL can't be blank Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:191:in `/^I should( not)? see ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/'
      features/documents.feature:175:in `Then I should see ""is invalid"" within the Mercury Modal'
```

```
    And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33
      expected to find css ""iframe[src*=\""http://www.youtube.com/embed/foo?wmode=transparent\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:360:in `/^I should see an video with source ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/'
      features/documents.feature:165:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor'
```
<issue_comment>username_0: and annoyingly our new stripe test has an intermittent failure too!

```
cucumber -p semaphoreci features/charge_activity.feature:6
```

```
Your userAgent seems to be not supported by inline-style-prefixer. Feel free to open an issue.
    And I fill in appropriate card details     # features/step_definitions/charge_steps.rb:1
      Unable to find field ""cc-exp"" (Capybara::ElementNotFound)
      ./features/step_definitions/charge_steps.rb:7:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/charge_steps.rb:3:in `/^I fill in appropriate card details$/'
      features/charge_activity.feature:9:in `And I fill in appropriate card details'
```
<issue_comment>username_0: and this one again:

```
<issue_comment>username_0: and another:

```
    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13
      expected ""display: none; "" to include ""display: block;"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/scrums_steps.rb:15:in `/^I should see a modal window with the (first|second) scrum$/'
      features/scrums.feature:25:in `Then I should see a modal window with the second scrum'
```

```
cucumber -p semaphoreci features/scrums.feature:19
```
<issue_comment>username_0: this looks interesting: https://bibwild.wordpress.com/2016/02/18/struggling-towards-reliable-capybara-javascript-testing/
<issue_comment>username_0: So I'm focusing on this last individual failure `features/scrums.feature:19` and I note that if I reduce the timeout settings to 0 or 0.1 I get these kinds of errors:

```
Scenario: Closing an existing video and opening a new one should update the player # features/scrums.feature:19
    Given I visit ""/scrums""                                                          # features/step_definitions/basic_steps.rb:64
    And I click the first scrum in the timeline                                      # features/step_definitions/scrums_steps.rb:24
      Timed out waiting for response to {""id"":""d9ae4d24-8368-4982-9eaa-a8cee66f8880"",""name"":""body"",""args"":[]}. It's possible that this happened because something took a very long time (for example a page load was slow). If so, setting the Poltergeist :timeout option to a higher value will help (see the docs for details). If increasing the timeout does not help, this is probably a bug in Poltergeist - please report it to the issue tracker. (Capybara::Poltergeist::TimeoutError)
      ./features/step_definitions/scrums_steps.rb:25:in `/^I click the first scrum in the timeline$/'
      features/scrums.feature:21:in `And I click the first scrum in the timeline'
```

which are different in kind from the errors we get in batch.  With  a poltergeist timeout of 1 and a Capybara.default_max_wait_time of 1 the tests passes for me reliably on my laptop, when I have an internet connection.

I note however that despite our attempt to plug the billy cache leaks that just from running this single test I have a set of new cache entries:

```
	features/req_cache/get_s.ytimg.com_915edb4b5f224648b2607dc57119661559439dc1.yml
	features/req_cache/get_s.ytimg.com_97ea91ae8364c347e1bafbcf3a60d3830420c3e5.yml
	features/req_cache/get_www.google.com_dda3078e234d52b37f250121ebb31829d67f6628.yml
	features/req_cache/get_www.youtube.com_754eb41a2f135e6eafbc40d9a4acf987250d14d4.yml
	features/req_cache/get_www.youtube.com_771e045e849dcf0e8325651601d2397edca211c9.yml
	features/req_cache/get_www.youtube.com_7ce01254dc22fb0ec070a5d431931551248b7971.yml
```

indicating that this test is still hitting some remote servers ... none of which have signficant variation in their parameters ... but I note that several of them have (particularly the www.youtube.com ones) are getting 301 (moved permanently) responses and as a consequence may not be being cached effectively - I thought that puffing billy cached these by default, but there is an extra setting for that that I can add:

```
    non_successful_cache_disabled = false
```

I also note that if I wrap this test in a @vcr tag we also get server network connections being cached.
<issue_comment>username_0: hmm, interesting to note that if I put @vcr tags on the documents.feature (one of the prime culprits) I get a fresh load of billy leaks ...

```
	features/req_cache/get_a.disquscdn.com_005fa385265710de9b800462d9db61ef21ec4c99.yml
	features/req_cache/get_a.disquscdn.com_2aa0b18e4bd9e580dc09cf4f417b21146ddf05b6.yml
	features/req_cache/get_a.disquscdn.com_2bc23452ce0ff2a22e561bb4519a23945f0ba922.yml
	features/req_cache/get_a.disquscdn.com_bca73df499bedab281bd05c54b027f262189d85d.yml
	features/req_cache/get_a.disquscdn.com_d008b8a1c5d90ecb9fc1701353d06b9481fa230b.yml
	features/req_cache/get_disqus.com_442dc930b209a7b62857b10a08ab762f55c39f56.yml
	features/req_cache/get_google.com_8a28b678b788b1c051c987cd0d6f8c697a48b352.yml
	features/req_cache/get_s.ytimg.com_915edb4b5f224648b2607dc57119661559439dc1.yml
	features/req_cache/get_s.ytimg.com_97ea91ae8364c347e1bafbcf3a60d3830420c3e5.yml
	features/req_cache/get_ssl.google-analytics.com_7b9a51d3b1e9af83bfc375f4813db28046b99513.yml
	features/req_cache/get_www.google.com_dda3078e234d52b37f250121ebb31829d67f6628.yml
	features/req_cache/get_www.youtube.com_36a2809495d3decd3d207abd85e5162a07e86986.yml
	features/req_cache/get_www.youtube.com_e6558ad62c301081754b9ab9f6a15aeb1284f981.yml
```
<issue_comment>username_0: what's really odd is that these billy leaks don't appear when running in batch (without vcr) - need to check variations ...
<issue_comment>username_0: interesting - just running the document.feature by itself (without any vcr mods) generates new billy cache files, implying that somehow there is some different behaviour in terms of what sites the browser is hitting when we run the tests in batch and we run them at the feature file level.

For scrums I also saw this behaviour at the scenario level ...
<issue_comment>username_0: this implies some fundamental inconsistency in the browser based behaviour depending on whether we are in batch mode or individual feature or scenario mode, which is not a good thing ... locking down everything with vcr and billy will help reduce variation, but if there is something else causing this change between the different running modes then we won't get stability until we can identify and then either patch or remove that underlying problem ...
<issue_comment>username_0: Options:

1) comprehensive VCR sandboxing is required
2) upgrading all the relevant gems, e.g. capybara, phantomjs, poltergeist etc.
3) review features (and cucumber env settings one by one) --> start with a branch that had a single feature test - and check that passes on CI and developer machines, and then we would add in each acceptance in turn, checking what the tags mean - ensuring we have billy and vcr sandboxing, and working through everything to ensure maximum consistency ... could start with usual suspects
<issue_comment>username_1: At least some of the common failures are when trying to select form elements and no network traffic should be involved at that point, as we have discussed earlier in the thread.
It may be that the focus is in the wrong area since adding billy and/or vcr in those areas didn't fix the problems...so maybe it's more to do with field selection/validation than network reliability?
Sandboxing may be a good idea generally, but not necessarily as a solution to these failures...
<issue_comment>username_0: thanks @username_1 - it may well be that network sandboxing will not fix this, however note that previously I only added billy, not VCR.  What we have established so far is that billy by itself has not conclusively fixed these issues.  Network variability causing other tests to hang around and influence each other may still be a strong component of this problem, since VCR has not yet been added throughout for a complete sandbox.  

That's what we're doing in the cleanroom branch, as well as being on the lookout for other issues, but being able to do with a more manageable subset of the tests ... There seem to be several factors in play, and to be able to manage that I think we have to work hard to reduce all sources of external variation from our tests.
<issue_comment>username_0: so got this with what we think is fully sandboxed code:

```
    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33
      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL can't be blank Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:191:in `/^I should( not)? see ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/'
      features/documents.feature:174:in `Then I should see ""is invalid"" within the Mercury Modal'
```
```
cucumber -p semaphoreci features/documents.feature:167 # Scenario: Insert media model rejects badly formatted youtube links
```
<issue_comment>username_1: Ah that's annoying, *perhaps* leading to where I was going with it (ie not the lack of sandboxing being the issue) but still, lot of good work there so even if it doesn't help at all for this case, the tests should be more reliable overall I should think - so don't be disheartened!
Does this happen for you locally or was it a semaphore build that failed?
Do you want people to blast it again a load of times to see if we get it?
Have you tried it in an environment that wasn't a mac, maybe c9.io or an ubunto vm to see if you can get it to fail on a more regular basis and hopefully be easier to track down then?
<issue_comment>username_0: Another failure in a new location (this time in the old code):

```
 And I create a document named ""A New Guide to the Galaxy"" # features/step_definitions/activity_feed_steps.rb:15
    And I create a project named ""Build NCC-1701 Enterprise""  # features/step_definitions/activity_feed_steps.rb:25
      Timed out waiting for response to {""id"":""2866f7e2-cdae-49c3-b35e-05b0eaad0654"",""name"":""click"",""args"":[11,6]}. It's possible that this happened because something took a very long time (for example a page load was slow). If so, setting the Poltergeist :timeout option to a higher value will help (see the docs for details). If increasing the timeout does not help, this is probably a bug in Poltergeist - please report it to the issue tracker. (Capybara::Poltergeist::TimeoutError)
      ./features/step_definitions/basic_steps.rb:82:in `/^I click the ""([^""]*)"" button$/'
      ./features/step_definitions/activity_feed_steps.rb:26:in `/^I create a project named ""([^""]*)""$/'
      features/public_activity.feature:23:in `And I create a project named ""Build NCC-1701 Enterprise""'
capybara-screenshot could not detect a screenshot driver for 'poltergeist_billy_debug'. Saving with default with unknown results.
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-50.831.html
    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-50.831.png

Failing Scenarios:
cucumber -p semaphoreci features/public_activity.feature:25
```

@username_1 to answer some of your questions:

1) that was a failure on CI
2) the latest (and now complete) cleanroom branch could be blasted a few times to see if we get local failures - @username_2 at least had none locally while we were developing the whole thing which involved about 40+ runs, and I only had one failure, but that was with some extra cache files that I then added ...
3) we haven't tried on other platforms apart from it being run on @username_3, my and @username_2's systems.  A repeat run on C9 is a good idea - particularly in that all our projects should have C9 setup guides - I tried to reduce timeouts to make more reliable failures, but made no progress there.

My main plan of attack next is once we have the cleanroom in develop is wait for the next failure and then pounce on it for a detailed analysis with all networking variation removed ... there's also making the cleanroom work with ruby 2.3 ...
<issue_comment>username_1: @username_0 Ok I'll try to get a c9 build up and running at the weekend and give it a good few runs.<issue_closed>
<issue_comment>username_0: ```
 Scenario: Insert media model rejects badly formatted youtube links                                      # features/documents.feature:170
    Given I am logged in                                                                                  # features/step_definitions/user_steps.rb:19
    And I am using the Mercury Editor to edit document ""Guides""                                           # features/step_definitions/mercury_steps.rb:27
    And I am focused on the ""document body"" within the Mercury Editor                                     # features/step_definitions/contained_search_steps.rb:33
    And I click on the ""Insert Media"" button within the Mercury Toolbar                                   # features/step_definitions/contained_search_steps.rb:33
    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal # features/step_definitions/contained_search_steps.rb:33
    And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33
    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33
      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:167:in `/^I should( not)? see ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/'
      features/documents.feature:177:in `Then I should see ""is invalid"" within the Mercury Modal'
    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61
```
Failing Scenarios:
cucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links
<issue_comment>username_0: just got this locally:

```
expected to find css "".alert"" with text ""The project has been successfully updated."" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
./features/step_definitions/basic_steps.rb:199:in `/^I should( not)? see a flash ""([^""]*)""$/'
features/projects.feature:192:in `Then I should see a flash ""The project has been successfully updated.""'

Failing Scenarios:
cucumber features/projects.feature:185 # Scenario: Editing Pitch content with Mercury Editor
```

but also had some stray network connections:

```
:scope: 
:url: http://csi.gstatic.com/csi?v=3&s=gwidget&action=hangout&it=wdi.116,wri.116&srt=21&e=abc_e81,abc_e97,abc_e100,abc_e122,abc_e123,abc_e30,abc_e79,abc_e127,abc_l0,abc_m0,abc_n0,abc_m0n0,abc_u0&rt=
:body: ''
:status: 204
:method: get
:headers:
  Access-Control-Allow-Origin: ""*""
  Date: Thu, 14 Apr 2016 14:45:53 GMT
  Pragma: no-cache
  Expires: Fri, 01 Jan 1990 00:00:00 GMT
  Cache-Control: no-cache, no-store, must-revalidate
  Last-Modified: Wed, 21 Jan 2004 19:51:30 GMT
  Content-Type: image/gif
  Server: Golfe2
  Content-Length: '0'
  Connection: close
:content: ''
```
<issue_comment>username_0: another CI failure:

```
 And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor # features/step_definitions/contained_search_steps.rb:33
      expected to find css ""iframe[src*=\""http://www.youtube.com/embed/foo?wmode=transparent\""]"" but there were no matches (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:360:in `/^I should see an video with source ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:38:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:38:in `/^(.*) within the (.*)$/'
      features/documents.feature:164:in `And I should see an video with source ""http://www.youtube.com/embed/foo?wmode=transparent"" within the Mercury Editor'
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-04-14-15-14-41.579.html
    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2016-04-14-15-14-41.579.png
```

```
Failing Scenarios:
cucumber -p semaphoreci features/documents.feature:156 # Scenario: Insert media model accepts full url youtube links
```
<issue_comment>username_0: So we've got several more intermittent fails on CI with the new setup:

```
features/documents.feature:156
features/documents.feature:167
features/scrums.feature:22
```

The new sandboxed setup seems (?) more stable on individual developer machines, but if anything these fails on CI seem even more common?  At least if something is reliably failing we have a better chance of fixing it ...
<issue_comment>username_0: I was taking a little look at features/documents.feature:167 in more detail locally (it passes single and in batch on my local machine).

It occurred to me that perhaps there is a way to reset the JS browser inbetween test runs - which led me to find this post:

https://github.com/teampoltergeist/poltergeist/issues/375

which gives us another thing to experiment with.  What I tried first was printing out images around the elements that fails on CI like so:

```gherkin
  @javascript
  Scenario: Insert media model rejects badly formatted youtube links
    Given I am logged in
    And I am using the Mercury Editor to edit document ""Guides""
    And I am focused on the ""document body"" within the Mercury Editor
    And I click on the ""Insert Media"" button within the Mercury Toolbar
    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal
    And save a screenshot of the page at ""/tmp/before_insert.png""
    And I click ""Insert Media"" within the Mercury Editor Modal
    And save a screenshot of the page at ""/tmp/after_insert.png""
    Then I should see ""is invalid"" within the Mercury Modal
    And the Mercury Editor modal window should be visible
```

now interestingly that fails for me locally the way it fails on CI and the screen shots look like this:

![before insert](https://www.dropbox.com/s/anompzapd8yx6im/Screenshot%202016-04-15%2014.41.10.png?dl=1)

![after insert](https://www.dropbox.com/s/h4xmc59cleqfref/Screenshot%202016-04-15%2014.39.57.png?dl=1)
<issue_comment>username_0: and the error I get is this:

```
  And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33
    And save a screenshot of the page at ""/tmp/after_insert.png""                                          # features/step_definitions/basic_steps.rb:275
    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33
      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL can't be blank Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:191:in `/^I should( not)? see ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/'
      features/documents.feature:176:in `Then I should see ""is invalid"" within the Mercury Modal'
    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61
    HTML screenshot: /Users/username_0/Documents/GitHub/AgileVentures/WebsiteOne/tmp/capybara/screenshot_2016-04-15-12-08-29.698.html
    Image screenshot: /Users/username_0/Documents/GitHub/AgileVentures/WebsiteOne/tmp/capybara/screenshot_2016-04-15-12-08-29.698.png
```

and the dumped screen looks like this:

![](https://www.dropbox.com/s/uu2ociscr188ih6/Screenshot%202016-04-15%2014.42.41.png?dl=1)  the same stuff that @username_1 was looking at previously ...
<issue_comment>username_0: and this is kind of strange, since it makes it look like the youtube URL has been inserted correctly with the correct radiobutton clicked, but then after insert media is clicked the modal reloads with a different kind of issue?  Has the invalid issue appeared and then disappeared?  Are we running too fast or too slow here ... weird ...
<issue_comment>username_0: but the interesting thing is that if I run this again it fails in precisely the same way ...
<issue_comment>username_0: the presence of saving the first screenshot it what appears to force the failure ...
<issue_comment>username_0: here's a save of the correct output from a passing run:

![](https://www.dropbox.com/s/is2pbtbsg0l0vft/Screenshot%202016-04-15%2014.50.32.png?dl=1)
<issue_comment>username_0: hmmm https://robots.thoughtbot.com/write-reliable-asynchronous-integration-tests-with-capybara
<issue_comment>username_0: hmm, so I added a step to check the YouTube URL checkbox in the case of failure, and that works and I can see it is checked:

![](https://www.dropbox.com/s/ajylxz9e0rzz48d/Screenshot%202016-04-15%2017.12.12.png?dl=1)

but we are still stuck with the other error message ...
<issue_comment>username_0: so I've added extra selectors of that YouTube checkbox in multiple places that might help with these document.feature issues. 

However we also have:

```

  @javascript
  Scenario: Closing an existing video and opening a new one should update the player # features/scrums.feature:22
    Given I visit ""/scrums""                                                          # features/step_definitions/basic_steps.rb:64
    And I click the first scrum in the timeline                                      # features/step_definitions/scrums_steps.rb:24
    Then I should see a modal window with the first scrum                            # features/step_definitions/scrums_steps.rb:13
    When I close the modal                                                           # features/step_definitions/scrums_steps.rb:28
    And I click the second scrum in the timeline                                     # features/step_definitions/scrums_steps.rb:24
      Firing a click at co-ordinates [583.5, 403.5] failed. Poltergeist detected another element with CSS selector 'html body.modal-open div#wrap div#main div.container div.col-lg-9 div#scrumVideo.modal.fade.in div.modal-dialog div.modal-content div.modal-body div.video-container iframe' at this position. It may be overlapping the element you are trying to interact with. If you don't care about overlapping elements, try using node.trigger('click'). (Capybara::Poltergeist::MouseEventFailed)
      ./features/step_definitions/scrums_steps.rb:25:in `/^I click the (first|second) scrum in the timeline$/'
      features/scrums.feature:27:in `And I click the second scrum in the timeline'
    Then I should see a modal window with the second scrum                           # features/step_definitions/scrums_steps.rb:13
    HTML screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-45.158.html
    Image screenshot: /home/runner/WebsiteOne/tmp/capybara/screenshot_2014-07-15-12-00-45.158.png
```

which is different again entirely ...
<issue_comment>username_0: so we could try updating to:

```
When(/^I click the (first|second) scrum in the timeline$/) do |ordinal|
  page.all(:css, ""a.scrum_yt_link"").send(ordinal.to_sym).trigger('click')
end
```
<issue_comment>username_0: or perhaps better to make the closing of the modals more reliable we should have:

```ruby
When(/^I close the modal$/) do
  page.find(:css,'.close').click
  expect(page).not_to have_css('.close')
end
```<issue_closed>
<issue_comment>username_0: ```
 Scenario: Insert media model rejects badly formatted youtube links                                      # features/documents.feature:170
    Given I am logged in                                                                                  # features/step_definitions/user_steps.rb:19
    And I am using the Mercury Editor to edit document ""Guides""                                           # features/step_definitions/mercury_steps.rb:27
    And I am focused on the ""document body"" within the Mercury Editor                                     # features/step_definitions/contained_search_steps.rb:33
    And I click on the ""Insert Media"" button within the Mercury Toolbar                                   # features/step_definitions/contained_search_steps.rb:33
    And I fill in ""YouTube URL"" with ""https://www.youtube.io/watch?v=foo"" within the Mercury Editor Modal # features/step_definitions/contained_search_steps.rb:33
    And I click ""Insert Media"" within the Mercury Editor Modal                                            # features/step_definitions/contained_search_steps.rb:33
    Then I should see ""is invalid"" within the Mercury Modal                                               # features/step_definitions/contained_search_steps.rb:33
      expected to find text ""is invalid"" in ""Insert Media (images and videos)× Images URL Videos YouTube URL Vimeo URL Options Alignment Float Width Height"" (RSpec::Expectations::ExpectationNotMetError)
      ./features/step_definitions/basic_steps.rb:167:in `/^I should( not)? see ""([^""]*)""$/'
      ./features/step_definitions/contained_search_steps.rb:41:in `block (2 levels) in <top (required)>'
      ./features/step_definitions/contained_search_steps.rb:41:in `/^(.*) within the (.*)$/'
      features/documents.feature:177:in `Then I should see ""is invalid"" within the Mercury Modal'
    And the Mercury Editor modal window should be visible                                                 # features/step_definitions/mercury_steps.rb:61
```
Failing Scenarios:
cucumber features/documents.feature:170 # Scenario: Insert media model rejects badly formatted youtube links<issue_closed>"
gohugoio/hugo,238575772,3647,,"[{'action': 'opened', 'author': 'bep', 'comment_id': None, 'datetime': '2017-06-26 15:12:56+00:00', 'masked_author': 'username_0', 'text': 'While the splitting of docs => hugoDocs was a good idea, and we should continue with that, the submodule approach has some major flaws:\r\n\r\n1) It\'s not possible to create an ""atomic PR"" with both code and documentation changes.\r\n2) Old PRs that does the above is no longer easily mergeable.\r\n3) This change made the release process more complex than needed.\r\n\r\nMaybe Git subtrees?\r\n\r\nhttps://developer.atlassian.com/blog/2015/05/the-power-of-git-subtree/\r\n\r\nHelp/suggestions welcome. I think we got to fix this sooner than later.\r\n\r\n/cc @username_1 @spf13 @moorereason', 'title': 'Find alternative to submodule for /docs', 'type': 'issue'}
 {'action': 'created', 'author': 'bep', 'comment_id': 311141683.0, 'datetime': '2017-06-26 18:24:50+00:00', 'masked_author': 'username_0', 'text': 'This article describes it pretty well:\r\n\r\nhttps://medium.com/@v/git-subtrees-a-tutorial-6ff568381844\r\n\r\nA sub-tree should be less painful. I will do that.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'bep', 'comment_id': 311147186.0, 'datetime': '2017-06-26 18:44:46+00:00', 'masked_author': 'username_0', 'text': 'Notes:\r\n\r\n```bash\r\ngit remote add docs ychag@example.com:gohugoio/hugoDocs.git \r\ngit subtree add --prefix=docs/ docs master --squash\r\n```\r\n\r\nPulling changes should be:\r\n\r\n```bash\r\ngit subtree pull --prefix=docs/ docs master --squash\r\n```\r\n\r\n@username_1 we should mostly do changes in `hugoDocs`, but I guess we can synch both ways if needed (use case: PRs with docs changes). We should live with this for a while to test it out and update contrib. guide.', 'title': None, 'type': 'comment'}
 {'action': 'closed', 'author': 'bep', 'comment_id': None, 'datetime': '2017-06-26 18:46:48+00:00', 'masked_author': 'username_0', 'text': '', 'title': None, 'type': 'issue'}
 {'action': 'created', 'author': 'digitalcraftsman', 'comment_id': 311152256.0, 'datetime': '2017-06-26 19:04:10+00:00', 'masked_author': 'username_1', 'text': '@username_0 re the use of the master branch: please have a look at https://github.com/gohugoio/hugoDocs/pull/19#issuecomment-311145110.', 'title': None, 'type': 'comment'}]","<issue_start><issue_comment>Title: Find alternative to submodule for /docs
username_0: While the splitting of docs => hugoDocs was a good idea, and we should continue with that, the submodule approach has some major flaws:

1) It's not possible to create an ""atomic PR"" with both code and documentation changes.
2) Old PRs that does the above is no longer easily mergeable.
3) This change made the release process more complex than needed.

Maybe Git subtrees?

https://developer.atlassian.com/blog/2015/05/the-power-of-git-subtree/

Help/suggestions welcome. I think we got to fix this sooner than later.

/cc @username_1 @spf13 @moorereason
<issue_comment>username_0: This article describes it pretty well:

https://medium.com/@v/git-subtrees-a-tutorial-6ff568381844

A sub-tree should be less painful. I will do that.
<issue_comment>username_0: Notes:

```bash
git remote add docs git@github.com:gohugoio/hugoDocs.git 
git subtree add --prefix=docs/ docs master --squash
```

Pulling changes should be:

```bash
git subtree pull --prefix=docs/ docs master --squash
```

@username_1 we should mostly do changes in `hugoDocs`, but I guess we can synch both ways if needed (use case: PRs with docs changes). We should live with this for a while to test it out and update contrib. guide.<issue_closed>
<issue_comment>username_1: @username_0 re the use of the master branch: please have a look at https://github.com/gohugoio/hugoDocs/pull/19#issuecomment-311145110."
jaspervdj/hakyll,484827633,724,,"[{'action': 'opened', 'author': 'gwern', 'comment_id': None, 'datetime': '2019-08-24 14:47:08+00:00', 'masked_author': 'username_0', 'text': 'It would be good if the generated tags were a little more informative by default for readers & accessibility issues: right now, generated tags are bare links with no metadata, but it would be straightforward to add a title or description for readers.\r\n\r\nCurrently, to substitute in tags, the Hakyll workflow looks something like this (using username_0.net as an example):\r\n\r\n```.haskell\r\npostCtx :: Tags -> Context String\r\npostCtx tags =\r\n    tagsField ""tagsHTML"" tags <>\r\n    defaultContext <>\r\n   ...\r\n```\r\n\r\nWhich defines the `tagsHTML` template variable for substituting into a HTML template:\r\n\r\n```.html\r\n<span id=""tags""><em>$tagsHTML$</em></span>\r\n```\r\n\r\nWhich gets compiled to\r\n\r\n```.html\r\n<span id=""tags""><em><a href=""./tags/statistics"">statistics</a>, <a href=""./tags/decision%20theory"">decision theory</a>, <a href=""./tags/R"">R</a>, <a href=""./tags/survival%20analysis"">survival analysis</a>, <a href=""./tags/Bayes"">Bayes</a>, <a href=""./tags/tutorial"">tutorial</a></em></span>\r\n```\r\n\r\nThe `<a>` tags have no `alt`/`title` attributes, so when the user hovers over them, they learn nothing more. It would be better if they could read something like `<a href=""./tags/statistics"" title=""Index of all pages tagged \'statistics\' on this website"">statistics</a>` (ie following a template like `<a href=""./tags/$TAG"" title=""Index of all pages tagged \'$TAG\' on this website"">$TAG</a>`).\r\n\r\nIn `Hakyll/Web/Tags.hs`, the ultimately responsible code appears to be `simpleRenderLink`:\r\n\r\n```.haskell\r\nsimpleRenderLink tag (Just filePath) =\r\n  Just $ H.a ! A.href (toValue $ toUrl filePath) $ toHtml tag\r\n```\r\n\r\nLooking at [`blaze`](https://hackage.haskell.org/package/blaze-html-0.9.1.1/docs/Text-Blaze-Html5-Attributes.html#v:title) docs, I think this would just require adding in something like `A.title tag $` to give something like \r\n\r\n```.haskell\r\nsimpleRenderLink tag (Just filePath) =\r\n  Just $ H.a ! A.title tag $ A.href (toValue $ toUrl filePath) $ toHtml tag\r\n```\r\n\r\n?\r\n\r\nI realize that I can probably do this for my website with the `tagsFieldWith` function and overriding the rendering function, but this is a small but general enhancement I think all Hakyll websites using tags would benefit from, and I can\'t think of any reason this shouldn\'t be a default and pushed upstream.', 'title': 'Add informative tooltips/titles to generated tag fields', 'type': 'issue'}
 {'action': 'created', 'author': 'jaspervdj', 'comment_id': 524626941.0, 'datetime': '2019-08-25 12:39:01+00:00', 'masked_author': 'username_1', 'text': ""Yes, I think this would be good to have -- a disadvantage is that it locks the website's language to English, but again, it's possible to override it anyway."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'gwern', 'comment_id': 526969710.0, 'datetime': '2019-09-02 01:03:25+00:00', 'masked_author': 'username_0', 'text': 'Looks like I got the blaze slightly wrong. Here\'s a diff which seems to work for me:\r\n\r\n```.diff\r\ndiff --git a/lib/Hakyll/Web/Tags.hs b/lib/Hakyll/Web/Tags.hs\r\nindex 88119c2..9a4b87a 100644\r\n--- a/lib/Hakyll/Web/Tags.hs\r\n+++ b/lib/Hakyll/Web/Tags.hs\r\n@@ -326,7 +326,9 @@ categoryField =\r\n simpleRenderLink :: String -> (Maybe FilePath) -> Maybe H.Html\r\n simpleRenderLink _   Nothing         = Nothing\r\n simpleRenderLink tag (Just filePath) =\r\n-  Just $ H.a ! A.href (toValue $ toUrl filePath) $ toHtml tag\r\n+  Just $ H.a ! A.title (H.stringValue (""Index of all pages tagged \'""++tag++""\' on this website.""))\r\n+             ! A.href (toValue $ toUrl filePath)\r\n+             $ toHtml tag\r\n```\r\n\r\nProduces HTML with the username_0.net template like\r\n\r\n```.html\r\n     <div id=""page-metadata"">\r\n          <p><span id=""page-description""><em>A log of experiments done on the site design, intended to render pages more readable, focusing on the challenge of testing a static site, page width, fonts, plugins, and effects of advertising.</em></span>\r\n            <br />\r\n            topics: <span id=""tags""><em><a title=""Index of all pages tagged \'experiments\' on this website."" href=""./tags/experiments"">experiments</a>, <a title=""Index of all pages tagged \'statistics\' on this website."" href=""./tags/statistics"">statistics</a>, <a title=""Index of all pages tagged \'computer science\' on this website."" href=""./tags/computer%20science"">computer science</a>, <a title=""Index of all pages tagged \'meta\' on this website."" href=""./tags/meta"">meta</a>, <a title=""Index of all pages tagged \'decision theory\' on this website."" href=""./tags/decision%20theory"">decision theory</a>, <a title=""Index of all pages tagged \'shell\' on this website."" href=""./tags/shell"">shell</a>, <a title=""Index of all pages tagged \'R\' on this website."" href=""./tags/R"">R</a>, <a title=""Index of all pages tagged \'JS\' on this website."" href=""./tags/JS"">JS</a>, <a title=""Index of all pages tagged \'CSS\' on this website."" href=""./tags/CSS"">CSS</a>, <a title=""Index of all pages tagged \'power analysis\' on this website."" href=""./tags/power%20analysis"">power analysis</a>, <a title=""Index of all pages tagged \'Bayes\' on this website."" href=""./tags/Bayes"">Bayes</a>, <a title=""Index of all pages tagged \'Google\' on this website."" href=""./tags/Google"">Google</a>, <a title=""Index of all pages tagged \'tutorial\' on this website."" href=""./tags/tutorial"">tutorial</a></em></span>\r\n            <br />\r\n            <span id=""page-created"">created: <em>16 Jun 2012</em></span>;  <span id=""last-modified"">modified: <em>16 Feb 2019</em></span>; <span id=""version"">status: <em>in progress</em></span>; <span id=""epistemological-status""><a href=""./About#confidence-tags"" title=""Explanation of \'confidence\' metadata"">confidence:</a> <em>possible</em></span>; <span id=""importance""><a href=""./About#importance-tags"" title=""Explanation of \'importance\' metadata"">importance:</a> <em>4</em></span>\r\n          </p>\r\n          <hr>\r\n        </div>\r\n```\r\n\r\nLooks good to me.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'gwern', 'comment_id': 544547768.0, 'datetime': '2019-10-21 14:43:45+00:00', 'masked_author': 'username_0', 'text': ""Any problems with that diff? It so far hasn't produced any problems for me: the tooltips work and are valid HTML/CSS according to the validators."", 'title': None, 'type': 'comment'}]","<issue_start><issue_comment>Title: Add informative tooltips/titles to generated tag fields
username_0: It would be good if the generated tags were a little more informative by default for readers & accessibility issues: right now, generated tags are bare links with no metadata, but it would be straightforward to add a title or description for readers.

Currently, to substitute in tags, the Hakyll workflow looks something like this (using username_0.net as an example):

```.haskell
postCtx :: Tags -> Context String
postCtx tags =
    tagsField ""tagsHTML"" tags <>
    defaultContext <>
   ...
```

Which defines the `tagsHTML` template variable for substituting into a HTML template:

```.html
<span id=""tags""><em>$tagsHTML$</em></span>
```

Which gets compiled to

```.html
<span id=""tags""><em><a href=""./tags/statistics"">statistics</a>, <a href=""./tags/decision%20theory"">decision theory</a>, <a href=""./tags/R"">R</a>, <a href=""./tags/survival%20analysis"">survival analysis</a>, <a href=""./tags/Bayes"">Bayes</a>, <a href=""./tags/tutorial"">tutorial</a></em></span>
```

The `<a>` tags have no `alt`/`title` attributes, so when the user hovers over them, they learn nothing more. It would be better if they could read something like `<a href=""./tags/statistics"" title=""Index of all pages tagged 'statistics' on this website"">statistics</a>` (ie following a template like `<a href=""./tags/$TAG"" title=""Index of all pages tagged '$TAG' on this website"">$TAG</a>`).

In `Hakyll/Web/Tags.hs`, the ultimately responsible code appears to be `simpleRenderLink`:

```.haskell
simpleRenderLink tag (Just filePath) =
  Just $ H.a ! A.href (toValue $ toUrl filePath) $ toHtml tag
```

Looking at [`blaze`](https://hackage.haskell.org/package/blaze-html-0.9.1.1/docs/Text-Blaze-Html5-Attributes.html#v:title) docs, I think this would just require adding in something like `A.title tag $` to give something like 

```.haskell
simpleRenderLink tag (Just filePath) =
  Just $ H.a ! A.title tag $ A.href (toValue $ toUrl filePath) $ toHtml tag
```

?

I realize that I can probably do this for my website with the `tagsFieldWith` function and overriding the rendering function, but this is a small but general enhancement I think all Hakyll websites using tags would benefit from, and I can't think of any reason this shouldn't be a default and pushed upstream.
<issue_comment>username_1: Yes, I think this would be good to have -- a disadvantage is that it locks the website's language to English, but again, it's possible to override it anyway.
<issue_comment>username_0: Looks like I got the blaze slightly wrong. Here's a diff which seems to work for me:

```.diff
diff --git a/lib/Hakyll/Web/Tags.hs b/lib/Hakyll/Web/Tags.hs
index 88119c2..9a4b87a 100644
--- a/lib/Hakyll/Web/Tags.hs
+++ b/lib/Hakyll/Web/Tags.hs
@@ -326,7 +326,9 @@ categoryField =
 simpleRenderLink :: String -> (Maybe FilePath) -> Maybe H.Html
 simpleRenderLink _   Nothing         = Nothing
 simpleRenderLink tag (Just filePath) =
-  Just $ H.a ! A.href (toValue $ toUrl filePath) $ toHtml tag
+  Just $ H.a ! A.title (H.stringValue (""Index of all pages tagged '""++tag++""' on this website.""))
+             ! A.href (toValue $ toUrl filePath)
+             $ toHtml tag
```

Produces HTML with the username_0.net template like

```.html
     <div id=""page-metadata"">
          <p><span id=""page-description""><em>A log of experiments done on the site design, intended to render pages more readable, focusing on the challenge of testing a static site, page width, fonts, plugins, and effects of advertising.</em></span>
            <br />
            topics: <span id=""tags""><em><a title=""Index of all pages tagged 'experiments' on this website."" href=""./tags/experiments"">experiments</a>, <a title=""Index of all pages tagged 'statistics' on this website."" href=""./tags/statistics"">statistics</a>, <a title=""Index of all pages tagged 'computer science' on this website."" href=""./tags/computer%20science"">computer science</a>, <a title=""Index of all pages tagged 'meta' on this website."" href=""./tags/meta"">meta</a>, <a title=""Index of all pages tagged 'decision theory' on this website."" href=""./tags/decision%20theory"">decision theory</a>, <a title=""Index of all pages tagged 'shell' on this website."" href=""./tags/shell"">shell</a>, <a title=""Index of all pages tagged 'R' on this website."" href=""./tags/R"">R</a>, <a title=""Index of all pages tagged 'JS' on this website."" href=""./tags/JS"">JS</a>, <a title=""Index of all pages tagged 'CSS' on this website."" href=""./tags/CSS"">CSS</a>, <a title=""Index of all pages tagged 'power analysis' on this website."" href=""./tags/power%20analysis"">power analysis</a>, <a title=""Index of all pages tagged 'Bayes' on this website."" href=""./tags/Bayes"">Bayes</a>, <a title=""Index of all pages tagged 'Google' on this website."" href=""./tags/Google"">Google</a>, <a title=""Index of all pages tagged 'tutorial' on this website."" href=""./tags/tutorial"">tutorial</a></em></span>
            <br />
            <span id=""page-created"">created: <em>16 Jun 2012</em></span>;  <span id=""last-modified"">modified: <em>16 Feb 2019</em></span>; <span id=""version"">status: <em>in progress</em></span>; <span id=""epistemological-status""><a href=""./About#confidence-tags"" title=""Explanation of 'confidence' metadata"">confidence:</a> <em>possible</em></span>; <span id=""importance""><a href=""./About#importance-tags"" title=""Explanation of 'importance' metadata"">importance:</a> <em>4</em></span>
          </p>
          <hr>
        </div>
```

Looks good to me.
<issue_comment>username_0: Any problems with that diff? It so far hasn't produced any problems for me: the tooltips work and are valid HTML/CSS according to the validators."
gohugoio/hugo,617381605,7265,,"[{'action': 'opened', 'author': 'gandhiShepard', 'comment_id': None, 'datetime': '2020-05-13 11:48:01+00:00', 'masked_author': 'username_0', 'text': ""RenderHooks fail to be applied to frontmatter markdown strings, unless you make a call to .Content before the call to the frontmatter key you need rendered to markdown.\r\n\r\nExample 1 (fail):\r\n```\r\n<div>{{ .Params.text | $.Page.RenderString }}</div>\r\n```\r\nThis will not apply RenderHooks to the .text fronmatter property.\r\n\r\nExample 2 (fail):\r\n```\r\n<div>{{ .Params.text | $.Page.RenderString }}</div>\r\n<div>{{ .Content }}</div>\r\n```\r\nThis will not apply RenderHooks to the .text fronmatter property either.\r\n\r\nExample 3 - The hack (Pass):\r\n```\r\n<div>{{ .Content }}</div>\r\n<div>{{ .Params.text | $.Page.RenderString }}</div>\r\n```\r\nThis will make the RenderHook work for both outputs. However, in this case, I have an empty .Content variable. I'm only placing it above the call to .RenderString in order to get the RenderHook to be applied to the frontmatter markdown string contained in the .Params.text property.\r\n\r\nI’m sure that RenderHooks were conceived for use with .Content because that’s were the content is! But RenderHooks provides a super power when used on frontmatter strings as well.\r\n\r\nI use Forestry.io as a Content Management System for Hugo. As such, I can change the layout of the page if I store the content in the frontmatter as opposed to the .Content area. \r\n\r\nSo, in the end, I cam make this work, but it is a hack. To make this more clear I spun up a quick site so you can see this behavior:\r\nhttps://brownerd.gitlab.io/renderhookissue/\r\n\r\nHere is the source code as well:\r\nhttps://gitlab.com/brownerd/renderhookissue\r\n\r\nPlease advise.\r\n\r\nP.S. Hugo is AMAZING!\r\n\r\n<!-- Please answer these questions before submitting your issue. Thanks! -->\r\n\r\n### What version of Hugo are you using (`hugo version`)?\r\n\r\n<pre>\r\n$ hugo version \r\n0.70.0\r\n</pre>\r\n\r\n### Does this issue reproduce with the latest release?\r\nYes"", 'title': 'Render Hooks markdown hack', 'type': 'issue'}
 {'action': 'created', 'author': 'bep', 'comment_id': 627966469.0, 'datetime': '2020-05-13 12:59:11+00:00', 'masked_author': 'username_1', 'text': 'This is a bug.\r\n\r\nNote that you can assign the content to a variable, so this is a better ""hack"":\r\n\r\n```bash\r\n{{ $notused := .Content }} }}\r\n<div>{{ .Params.text | $.Page.RenderString }}</div>\r\n```', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'gandhiShepard', 'comment_id': 627973555.0, 'datetime': '2020-05-13 13:10:32+00:00', 'masked_author': 'username_0', 'text': 'True. That makes more sense for the work around. Also, I think there is an extra set of `}}` in your snippet after .Coment. Correct? Much respect.', 'title': None, 'type': 'comment'}
 {'action': 'closed', 'author': 'bep', 'comment_id': None, 'datetime': '2020-05-24 11:21:09+00:00', 'masked_author': 'username_1', 'text': '', 'title': None, 'type': 'issue'}]","<issue_start><issue_comment>Title: Render Hooks markdown hack
username_0: RenderHooks fail to be applied to frontmatter markdown strings, unless you make a call to .Content before the call to the frontmatter key you need rendered to markdown.

Example 1 (fail):
```
<div>{{ .Params.text | $.Page.RenderString }}</div>
```
This will not apply RenderHooks to the .text fronmatter property.

Example 2 (fail):
```
<div>{{ .Params.text | $.Page.RenderString }}</div>
<div>{{ .Content }}</div>
```
This will not apply RenderHooks to the .text fronmatter property either.

Example 3 - The hack (Pass):
```
<div>{{ .Content }}</div>
<div>{{ .Params.text | $.Page.RenderString }}</div>
```
This will make the RenderHook work for both outputs. However, in this case, I have an empty .Content variable. I'm only placing it above the call to .RenderString in order to get the RenderHook to be applied to the frontmatter markdown string contained in the .Params.text property.

I’m sure that RenderHooks were conceived for use with .Content because that’s were the content is! But RenderHooks provides a super power when used on frontmatter strings as well.

I use Forestry.io as a Content Management System for Hugo. As such, I can change the layout of the page if I store the content in the frontmatter as opposed to the .Content area. 

So, in the end, I cam make this work, but it is a hack. To make this more clear I spun up a quick site so you can see this behavior:
https://brownerd.gitlab.io/renderhookissue/

Here is the source code as well:
https://gitlab.com/brownerd/renderhookissue

Please advise.

P.S. Hugo is AMAZING!

<!-- Please answer these questions before submitting your issue. Thanks! -->

### What version of Hugo are you using (`hugo version`)?

<pre>
$ hugo version 
0.70.0
</pre>

### Does this issue reproduce with the latest release?
Yes
<issue_comment>username_1: This is a bug.

Note that you can assign the content to a variable, so this is a better ""hack"":

```bash
{{ $notused := .Content }} }}
<div>{{ .Params.text | $.Page.RenderString }}</div>
```
<issue_comment>username_0: True. That makes more sense for the work around. Also, I think there is an extra set of `}}` in your snippet after .Coment. Correct? Much respect.<issue_closed>"
apache/apisix-website,983910982,547,"{'number': 547.0, 'repo': 'apisix-website', 'user_login': 'apache'}","[{'action': 'opened', 'author': 'bzp2010', 'comment_id': None, 'datetime': '2021-08-31T14:11:58Z', 'masked_author': 'username_0', 'text': ""Changes:\r\n\r\nMove the user wall on the home page to a separate page to meet ASF's regulations for the project website.\r\n\r\nScreenshots of the change:\r\n\r\n![image](https://user-images.githubusercontent.com/8078418/131518022-eaaa39a4-f809-4a9a-bc1b-154cbf86794d.png)"", 'title': 'feat: new independent showcase page', 'type': 'issue'}
 {'action': 'created', 'author': 'juzhiyuan', 'comment_id': 909820447.0, 'datetime': '2021-09-01 02:35:33+00:00', 'masked_author': 'username_1', 'text': 'cc @Baoyuantop @LiteSun to have a review', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': '1502shivam-singh', 'comment_id': 910222180.0, 'datetime': '2021-09-01 12:08:57+00:00', 'masked_author': 'username_2', 'text': ""Hey @username_0 this version looks nice and clean, but I feel we can work more to build over this in the future. Personally I was thinking something on the lines of [this page](https://stripe.com/en-in/customers) with the case studies linking to blogs on our websites or their's related to the work.\r\n\r\nFor now, this version does the work and looks clean too, so I feel we can keep it and moving forward build on it's foundation.\r\n\r\nOn a side note, given that this page is clear, what you all think about my suggestion in #519 on showcasing our users ?"", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'bzp2010', 'comment_id': 910287322.0, 'datetime': '2021-09-01 13:29:32+00:00', 'masked_author': 'username_0', 'text': 'Hi, @username_2.\r\nI saw your explanation there. I think this is very good. At the same time, we can fold a part of the logo by supporting downward expansion. However, this requires further understanding and interviews with users. This may take some time to move forward gradually.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 910489289.0, 'datetime': '2021-09-01 17:17:14+00:00', 'masked_author': 'username_3', 'text': 'Hi @username_2 , your design is good way IMO, and in apache way, we need a new page to show the user cases in stead of showing them in home page, so I will be very kind of you to give more advices on the single page design, thanks a lot', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 910505914.0, 'datetime': '2021-09-01 17:38:41+00:00', 'masked_author': 'username_3', 'text': 'sorry to make `nofollow` to the wrong link, just modify them @username_0', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': '1502shivam-singh', 'comment_id': 910891174.0, 'datetime': '2021-09-01 23:25:54+00:00', 'masked_author': 'username_2', 'text': 'Sure, one small suggestion I have as of now is to redirect the learn more links to their respective case studies, but as mentioned by @username_0 above that these are on availability basis, so what we can do is link the ones we have and keep the rest as is. As time progresses we could adapt changes later. \r\nAs of visual design, we need to work on this, but firstly having something up is important so improving visual design can be done later I guess.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': '1502shivam-singh', 'comment_id': 910916218.0, 'datetime': '2021-09-01 23:52:22+00:00', 'masked_author': 'username_2', 'text': 'Gotcha, we can add data gradually as we have more to leverage.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 910970318.0, 'datetime': '2021-09-02 00:54:03+00:00', 'masked_author': 'username_3', 'text': 'Nice suggestion @username_2 , we have some of the use case blogs in our website, they can be as the user case studies here, not many though. How about we use this page as the user case show page, and at the same time use it as the user case index page?\r\nalso cc @Serendipity96 @yzeng25 @username_1 @Baoyuantop @KishaniKandasamy @moonming', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 911036355.0, 'datetime': '2021-09-02 02:05:25+00:00', 'masked_author': 'username_3', 'text': 'Hi all, we have finished our first step of update blog page, here is our action:', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'bzp2010', 'comment_id': 913595177.0, 'datetime': '2021-09-06 12:05:34+00:00', 'masked_author': 'username_0', 'text': ""Hi, @username_3. I have modified the showcase page to the style in the connection. [link here](https://github.com/apache/apisix-website/issues/519#issuecomment-913367605), and [demo here](https://deploy-preview-547--apisix.netlify.app/showcase/)\r\n\r\nIn the process of modification, I found that some logo images are non-standard shapes. (e.g. square or too wide) These pictures don't show well. We need to notify these users to update the logo image. If there is no response, it should be removed or hidden."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 913856142.0, 'datetime': '2021-09-06 21:15:10+00:00', 'masked_author': 'username_3', 'text': 'LGTM, we can create a new issue to trace it\r\n\r\nand it would be better to keep the name the same as the url, use `showcase` would be better then, or unified into powered by is also a good choice.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 915004499.0, 'datetime': '2021-09-08 07:51:57+00:00', 'masked_author': 'username_3', 'text': 'Hi @username_0 , please fix the conflict file when you have time , thanks', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'liuxiran', 'comment_id': 915007325.0, 'datetime': '2021-09-08 07:56:39+00:00', 'masked_author': 'username_3', 'text': 'cc @Baoyuantop @username_2 to take a look, thanks', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'bzp2010', 'comment_id': 915196436.0, 'datetime': '2021-09-08 12:30:10+00:00', 'masked_author': 'username_0', 'text': 'Update: Add a timeout for Axios to prevent the detection process from executing indefinitely.\r\n\r\ncc @username_3 @username_1', 'title': None, 'type': 'comment'}]","<issue_start><issue_comment>Title: feat: new independent showcase page
username_0: Changes:

Move the user wall on the home page to a separate page to meet ASF's regulations for the project website.

Screenshots of the change:

![image](https://user-images.githubusercontent.com/8078418/131518022-eaaa39a4-f809-4a9a-bc1b-154cbf86794d.png)
<issue_comment>username_1: cc @Baoyuantop @LiteSun to have a review
<issue_comment>username_2: Hey @username_0 this version looks nice and clean, but I feel we can work more to build over this in the future. Personally I was thinking something on the lines of [this page](https://stripe.com/en-in/customers) with the case studies linking to blogs on our websites or their's related to the work.

For now, this version does the work and looks clean too, so I feel we can keep it and moving forward build on it's foundation.

On a side note, given that this page is clear, what you all think about my suggestion in #519 on showcasing our users ?
<issue_comment>username_0: Hi, @username_2.
I saw your explanation there. I think this is very good. At the same time, we can fold a part of the logo by supporting downward expansion. However, this requires further understanding and interviews with users. This may take some time to move forward gradually.
<issue_comment>username_3: Hi @username_2 , your design is good way IMO, and in apache way, we need a new page to show the user cases in stead of showing them in home page, so I will be very kind of you to give more advices on the single page design, thanks a lot
<issue_comment>username_3: sorry to make `nofollow` to the wrong link, just modify them @username_0
<issue_comment>username_2: Sure, one small suggestion I have as of now is to redirect the learn more links to their respective case studies, but as mentioned by @username_0 above that these are on availability basis, so what we can do is link the ones we have and keep the rest as is. As time progresses we could adapt changes later. 
As of visual design, we need to work on this, but firstly having something up is important so improving visual design can be done later I guess.
<issue_comment>username_2: Gotcha, we can add data gradually as we have more to leverage.
<issue_comment>username_3: Nice suggestion @username_2 , we have some of the use case blogs in our website, they can be as the user case studies here, not many though. How about we use this page as the user case show page, and at the same time use it as the user case index page?
also cc @Serendipity96 @yzeng25 @username_1 @Baoyuantop @KishaniKandasamy @moonming
<issue_comment>username_3: Hi all, we have finished our first step of update blog page, here is our action:
<issue_comment>username_0: Hi, @username_3. I have modified the showcase page to the style in the connection. [link here](https://github.com/apache/apisix-website/issues/519#issuecomment-913367605), and [demo here](https://deploy-preview-547--apisix.netlify.app/showcase/)

In the process of modification, I found that some logo images are non-standard shapes. (e.g. square or too wide) These pictures don't show well. We need to notify these users to update the logo image. If there is no response, it should be removed or hidden.
<issue_comment>username_3: LGTM, we can create a new issue to trace it

and it would be better to keep the name the same as the url, use `showcase` would be better then, or unified into powered by is also a good choice.
<issue_comment>username_3: Hi @username_0 , please fix the conflict file when you have time , thanks
<issue_comment>username_3: cc @Baoyuantop @username_2 to take a look, thanks
<issue_comment>username_0: Update: Add a timeout for Axios to prevent the detection process from executing indefinitely.

cc @username_3 @username_1"
newrelic/developer-website,1045236699,1857,,"[{'action': 'opened', 'author': 'zstix', 'comment_id': None, 'datetime': '2021-11-04 21:42:09+00:00', 'masked_author': 'username_0', 'text': '## Description\r\nAs part of ""production readiness"" for swapping New Relic I/O over to being powered by NerdGraph, we should instrument the API calls being made and set up some alerting for failures.\r\n\r\nIt\'s not clear in which context the API calls are being made: are they happening in the browser or are Gatsby\'s Cloud Functions executing ""server-side"" somewhere? If they\'re happening client-side, we may be able to use New Relic\'s Browser agent to log these events. If they\'re happening server-side, then we may need to leverage [New Relic custom events](https://github.com/newrelic/developer-website/issues/1855) (since we don\'t have an agent installed in Gatsby).\r\n\r\n## Acceptance Criteria\r\n* [ ] https://github.com/newrelic/developer-website/issues/1821 (proof-of-concept & Gatsby upgrade)\r\n* [ ] https://github.com/newrelic/developer-website/issues/1852 (feature branch & Gatsby Cloud)\r\n* [ ] https://github.com/newrelic/developer-website/issues/1853 (landing page via SSR)\r\n* [ ] https://github.com/newrelic/developer-website/issues/1855 (search, sort, filter via SSR)\r\n* [ ] https://github.com/newrelic/developer-website/issues/1854 (details page via SSR)\r\n* [ ] Determine how we can get API call information into New Relic\r\n* [ ] Set up instrumentation for API calls to NerdGraph\r\n* [ ] Set up an alert condition for ""High number of failed API calls""', 'title': '[Public Catalog] Instrument & Alerting for API calls to NerdGraph', 'type': 'issue'}
 {'action': 'created', 'author': 'zstix', 'comment_id': 995314670.0, 'datetime': '2021-12-16 00:08:58+00:00', 'masked_author': 'username_0', 'text': ""I've got a PR up for the code to send custom events to New Relic (linked). Once this is set up and verified, I'll look into creating the alert condition and updating our dashboards."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'jpvajda', 'comment_id': 999043021.0, 'datetime': '2021-12-21 19:37:52+00:00', 'masked_author': 'username_1', 'text': 'blocked by this lack of functionality of Gatsby Cloud not supporting private environment variables.', 'title': None, 'type': 'comment'}]","<issue_start><issue_comment>Title: [Public Catalog] Instrument & Alerting for API calls to NerdGraph
username_0: ## Description
As part of ""production readiness"" for swapping New Relic I/O over to being powered by NerdGraph, we should instrument the API calls being made and set up some alerting for failures.

It's not clear in which context the API calls are being made: are they happening in the browser or are Gatsby's Cloud Functions executing ""server-side"" somewhere? If they're happening client-side, we may be able to use New Relic's Browser agent to log these events. If they're happening server-side, then we may need to leverage [New Relic custom events](https://github.com/newrelic/developer-website/issues/1855) (since we don't have an agent installed in Gatsby).

## Acceptance Criteria
* [ ] https://github.com/newrelic/developer-website/issues/1821 (proof-of-concept & Gatsby upgrade)
* [ ] https://github.com/newrelic/developer-website/issues/1852 (feature branch & Gatsby Cloud)
* [ ] https://github.com/newrelic/developer-website/issues/1853 (landing page via SSR)
* [ ] https://github.com/newrelic/developer-website/issues/1855 (search, sort, filter via SSR)
* [ ] https://github.com/newrelic/developer-website/issues/1854 (details page via SSR)
* [ ] Determine how we can get API call information into New Relic
* [ ] Set up instrumentation for API calls to NerdGraph
* [ ] Set up an alert condition for ""High number of failed API calls""
<issue_comment>username_0: I've got a PR up for the code to send custom events to New Relic (linked). Once this is set up and verified, I'll look into creating the alert condition and updating our dashboards.
<issue_comment>username_1: blocked by this lack of functionality of Gatsby Cloud not supporting private environment variables."
kubernetes/website,269375336,6086,"{'number': 6086.0, 'repo': 'website', 'user_login': 'kubernetes'}","[{'action': 'opened', 'author': 'bottkars', 'comment_id': None, 'datetime': '2017-10-29T06:32:55Z', 'masked_author': 'username_0', 'text': 'this is for Powershell Users, utilizing PSGallery as default Repo for installing kubectl on Windows\r\n\r\n![image](https://user-images.githubusercontent.com/8255007/32141188-f7be8432-bc79-11e7-89e3-89c1f2f398ef.png)\r\n![image](https://user-images.githubusercontent.com/8255007/32141233-599b6016-bc7b-11e7-9a43-55ee213452f7.png)', 'title': 'added installation via Powershell Gallery', 'type': 'issue'}
 {'action': 'created', 'author': 'bottkars', 'comment_id': 340241302.0, 'datetime': '2017-10-29 06:44:21+00:00', 'masked_author': 'username_0', 'text': 'cla requested 11 Minutes Ago.', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'steveperry-53', 'comment_id': 340522257.0, 'datetime': '2017-10-30 17:31:33+00:00', 'masked_author': 'username_1', 'text': ""@username_0 Can you check the **Allow edits from maintainers** box. It should be in the right column. If it's already checked, uncheck and recheck it. Thanks."", 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'heckj', 'comment_id': 360651510.0, 'datetime': '2018-01-26 00:55:32+00:00', 'masked_author': 'username_2', 'text': '/hold', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'heckj', 'comment_id': 360796904.0, 'datetime': '2018-01-26 14:20:47+00:00', 'masked_author': 'username_2', 'text': 'Thanks @username_0 \r\n/lgtm\r\n/hold cancel', 'title': None, 'type': 'comment'}
 {'action': 'created', 'author': 'darkvn79', 'comment_id': 360911600.0, 'datetime': '2018-01-26 21:39:40+00:00', 'masked_author': 'username_3', 'text': 'has problems with setting because , i think they in my system now ,  hackers\r\n\r\n![user-192](https://user-images.githubusercontent.com/35851649/35461811-f4da72d8-031b-11e8-9e30-ce7d05cd0565.png)\r\n![user-48](https://user-images.githubusercontent.com/35851649/35461821-f9efdc5e-031b-11e8-9e19-f65292600a15.png)\r\n![user-40](https://user-images.githubusercontent.com/35851649/35461830-00031642-031c-11e8-8b93-be9e3e015607.png)\r\n![user-32](https://user-images.githubusercontent.com/35851649/35461832-0579bdd8-031c-11e8-8fa3-65b0cb5d2f30.png)\r\n![user](https://user-images.githubusercontent.com/35851649/35461838-09f412be-031c-11e8-84e7-7cb33a701008.png)\r\n![guest](https://user-images.githubusercontent.com/35851649/35461841-0ddc6156-031c-11e8-9e3b-5ca7c8c76aec.png)', 'title': None, 'type': 'comment'}]","<issue_start><issue_comment>Title: added installation via Powershell Gallery
username_0: this is for Powershell Users, utilizing PSGallery as default Repo for installing kubectl on Windows

![image](https://user-images.githubusercontent.com/8255007/32141188-f7be8432-bc79-11e7-89e3-89c1f2f398ef.png)
![image](https://user-images.githubusercontent.com/8255007/32141233-599b6016-bc7b-11e7-9a43-55ee213452f7.png)
<issue_comment>username_0: cla requested 11 Minutes Ago.
<issue_comment>username_1: @username_0 Can you check the **Allow edits from maintainers** box. It should be in the right column. If it's already checked, uncheck and recheck it. Thanks.
<issue_comment>username_2: /hold
<issue_comment>username_2: Thanks @username_0 
/lgtm
/hold cancel
<issue_comment>username_3: has problems with setting because , i think they in my system now ,  hackers

![user-192](https://user-images.githubusercontent.com/35851649/35461811-f4da72d8-031b-11e8-9e30-ce7d05cd0565.png)
![user-48](https://user-images.githubusercontent.com/35851649/35461821-f9efdc5e-031b-11e8-9e19-f65292600a15.png)
![user-40](https://user-images.githubusercontent.com/35851649/35461830-00031642-031c-11e8-8b93-be9e3e015607.png)
![user-32](https://user-images.githubusercontent.com/35851649/35461832-0579bdd8-031c-11e8-8fa3-65b0cb5d2f30.png)
![user](https://user-images.githubusercontent.com/35851649/35461838-09f412be-031c-11e8-84e7-7cb33a701008.png)
![guest](https://user-images.githubusercontent.com/35851649/35461841-0ddc6156-031c-11e8-9e3b-5ca7c8c76aec.png)"
